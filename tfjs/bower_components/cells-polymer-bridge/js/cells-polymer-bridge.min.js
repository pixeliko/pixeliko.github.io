!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.cellsPolymer=t():e.cellsPolymer=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=46)}([function(e,t,n){"use strict";var r=n(5),i=n(98),o=n(14),a=n(96),s=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,o=i.toSubscriber(e,t,n);if(r?r.call(o,this.source):o.add(this.source||!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},e.prototype.forEach=function(e,t){var n=this;if(t||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?t=r.root.Rx.config.Promise:r.root.Promise&&(t=r.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,r){var i;i=n.subscribe(function(t){if(i)try{e(t)}catch(e){r(e),i.unsubscribe()}else e(t)},r,t)})},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[o.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 0===e.length?this:a.pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;if(e||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?e=r.root.Rx.config.Promise:r.root.Promise&&(e=r.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();t.Observable=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.bindingCodes={ALWAYS:"always",DELAYED:"delayed",UI:"ui",CURRENTVIEW:"currentview"},i=t.binding={DEFAULT:r.ALWAYS,VALUES:Object.values(r)},o=t.externalEventsCodes={PAGE_READY:"page-ready",PARSE_ROUTE:"parse-route",AFTER_PUBLISH:"after-publish",NAV_REQUEST:"nav-request",BEFORE_SET_ATTR_TO_NODE:"before-set-attr-to-node",AFTER_SET_ATTR_TO_NODE:"after-set-attr-to-node",BEFORE_CREATE_NODE:"before-create-node",AFTER_CREATE_NODE:"after-create-node",BEFORE_IMPORT:"before-import",AFTER_IMPORT:"after-import",PAGE_REQUEST:"page-request",PAGE_RESPONSE:"page-response",DATA_LOAD:"data-load",TEMPLATE_TRANSITION_END:"template-transition-end",TRACK_EVENT:"track-event",TEMPLATE_REGISTERED:"template-registered",ROUTER_BACKSTEP:"router-backstep",LOG_EVENT:"log-event"},a=t.externalEvents=Object.values(o),s=t.componentsPath="./bower_components/",u=t.composerEndpoint="./composerMocks/",c=t.deployEndpoint="",l=t.initialTemplate="login",h="core",f="ether.cells",p=t.monitoring={SEMAAS:{policy:"ei_bbva_es",mrId:h,nameSpace:f,identifier:"bridge",consumerId:"core@ether.cells"}},d=t.pagesPath="./pages/",v=t.prplCodes={NONE:"none",DEFER:"defer",PROGRESSIVE:"progressive",HERO:"hero"},y=t.prpl={DEFAULT:v.DEFER,VALUES:Object.values(v)};t.default={bindingCodes:r,binding:i,componentsPath:s,composerEndpoint:u,deployEndpoint:c,externalEvents:a,externalEventsCodes:o,initialTemplate:l,monitoring:p,pagesPath:d,prplCodes:v,prpl:y}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(53),c=r(u),l=20,h=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"listenToOnce",value:function(e,t,n){var r=function(){n(),e.removeEventListener(t,r)}.bind(this);e.addEventListener(t,r)}}]),t}(c.default),f=new h;f.setMaxListeners(l),t.default=f},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(17),o=n(4),a=n(26),s=n(15),u=function(e){function t(n,r,i){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a.empty;break;case 1:if(!n){this.destination=a.empty;break}if("object"==typeof n){n instanceof t?(this.syncErrorThrowable=n.syncErrorThrowable,this.destination=n,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,n,r,i)}}return r(t,e),t.prototype[s.rxSubscriber]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this,t=e._parent,n=e._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=n,this},t}(o.Subscription);t.Subscriber=u;var c=function(e){function t(t,n,r,o){e.call(this),this._parentSubscriber=t;var s,u=this;i.isFunction(n)?s=n:n&&(s=n.next,r=n.error,o=n.complete,n!==a.empty&&(u=Object.create(n),i.isFunction(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this))),this._context=u,this._next=s,this._error=r,this._complete=o}return r(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){throw this.unsubscribe(),e}},t.prototype.__tryOrSetError=function(e,t,n){try{t.call(this._context,n)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(u)},function(e,t,n){"use strict";function r(e){return e.reduce(function(e,t){return e.concat(t instanceof c.UnsubscriptionError?t.errors:t)},[])}var i=n(30),o=n(32),a=n(17),s=n(18),u=n(7),c=n(93),l=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var n=this,l=n._parent,h=n._parents,f=n._unsubscribe,p=n._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var d=-1,v=h?h.length:0;l;)l.remove(this),l=++d<v&&h[d]||null;if(a.isFunction(f)){var y=s.tryCatch(f).call(this);y===u.errorObject&&(t=!0,e=e||(u.errorObject.e instanceof c.UnsubscriptionError?r(u.errorObject.e.errors):[u.errorObject.e]))}if(i.isArray(p))for(d=-1,v=p.length;++d<v;){var b=p[d];if(o.isObject(b)){var y=s.tryCatch(b.unsubscribe).call(b);if(y===u.errorObject){t=!0,e=e||[];var g=u.errorObject.e;g instanceof c.UnsubscriptionError?e=e.concat(r(g.errors)):e.push(g)}}}if(t)throw new c.UnsubscriptionError(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;n=new e,n._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=this._subscriptions||(this._subscriptions=[]);return i.push(n),n._addParent(this),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);n!==-1&&t.splice(n,1)}},e.prototype._addParent=function(e){var t=this,n=t._parent,r=t._parents;n&&n!==e?r?r.indexOf(e)===-1&&r.push(e):this._parents=[e]:this._parent=e},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();t.Subscription=l},function(e,t,n){"use strict";(function(e){var n="undefined"!=typeof window&&window,r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,i="undefined"!=typeof e&&e,o=n||i||r;t.root=o,function(){if(!o)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(t,n(99))},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(0),o=n(12),a=n(11),s=n(8),u=function(e){function t(t,n){e.call(this),this.array=t,this.scheduler=n,n||1!==t.length||(this._isScalar=!0,this.value=t[0])}return r(t,e),t.create=function(e,n){return new t(e,n)},t.of=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var r=e[e.length-1];s.isScheduler(r)?e.pop():r=null;var i=e.length;return i>1?new t(e,r):1===i?new o.ScalarObservable(e[0],r):new a.EmptyObservable(r)},t.dispatch=function(e){var t=e.array,n=e.index,r=e.count,i=e.subscriber;return n>=r?void i.complete():(i.next(t[n]),void(i.closed||(e.index=n+1,this.schedule(e))))},t.prototype._subscribe=function(e){var n=0,r=this.array,i=r.length,o=this.scheduler;if(o)return o.schedule(t.dispatch,0,{array:r,index:n,count:i,subscriber:e});for(var a=0;a<i&&!e.closed;a++)e.next(r[a]);e.complete()},t}(i.Observable);t.ArrayObservable=u},function(e,t,n){"use strict";t.errorObject={e:{}}},function(e,t,n){"use strict";function r(e){return e&&"function"==typeof e.schedule}t.isScheduler=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(20),c=r(u),l=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.type="",n.spec=null,n.zone=null,n.node=null,n.fixed=null,n.priority=null,n.connections=null,n.spec=e,n.type=e.type,n.zone=e.zone,n.fixed=e.fixed,n.priority=e.priority,n.node=n.spec.node?n.spec.node:n.createElement(n.spec.tagName),n.connections=e.connections,n}return a(t,e),s(t,[{key:"setProps",value:function(){var e=this.spec;if(e.connections&&e.connections.ignoreAttr)for(var t=0;t<e.connections.ignoreAttr.length;t++){var n=e.connections.ignoreAttr[t];delete e.properties[n]}this.setAttrs(this.node,e.properties)}},{key:"isUnresolved",value:function(){return this.node.tagName.indexOf("-")>-1&&this.node.constructor===HTMLElement}}]),t}(c.default);t.default=l},function(e,t,n){"use strict";var r=n(0),i=n(73);r.Observable.fromEvent=i.fromEvent},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(0),o=function(e){function t(t){e.call(this),this.scheduler=t}return r(t,e),t.create=function(e){return new t(e)},t.dispatch=function(e){var t=e.subscriber;t.complete()},t.prototype._subscribe=function(e){var n=this.scheduler;return n?n.schedule(t.dispatch,0,{subscriber:e}):void e.complete()},t}(i.Observable);t.EmptyObservable=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(0),o=function(e){function t(t,n){e.call(this),this.value=t,this.scheduler=n,this._isScalar=!0,n&&(this._isScalar=!1)}return r(t,e),t.create=function(e,n){return new t(e,n)},t.dispatch=function(e){var t=e.done,n=e.value,r=e.subscriber;return t?void r.complete():(r.next(n),void(r.closed||(e.done=!0,this.schedule(e))))},t.prototype._subscribe=function(e){var n=this.value,r=this.scheduler;return r?r.schedule(t.dispatch,0,{done:!1,value:n,subscriber:e}):(e.next(n),void(e.closed||e.complete()))},t}(i.Observable);t.ScalarObservable=o},function(e,t,n){"use strict";function r(e){var t=e.Symbol;if("function"==typeof t)return t.iterator||(t.iterator=t("iterator polyfill")),t.iterator;var n=e.Set;if(n&&"function"==typeof(new n)["@@iterator"])return"@@iterator";var r=e.Map;if(r)for(var i=Object.getOwnPropertyNames(r.prototype),o=0;o<i.length;++o){var a=i[o];if("entries"!==a&&"size"!==a&&r.prototype[a]===r.prototype.entries)return a}return"@@iterator"}var i=n(5);t.symbolIteratorPonyfill=r,t.iterator=r(i.root),t.$$iterator=t.iterator},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}var i=n(5);t.getSymbolObservable=r,t.observable=r(i.root),t.$$observable=t.observable},function(e,t,n){"use strict";var r=n(5),i=r.root.Symbol;t.rxSubscriber="function"==typeof i&&"function"==typeof i.for?i.for("rxSubscriber"):"@@rxSubscriber",t.$$rxSubscriber=t.rxSubscriber},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(){var t=e.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return r(t,e),t}(Error);t.ObjectUnsubscribedError=i},function(e,t,n){"use strict";function r(e){return"function"==typeof e}t.isFunction=r},function(e,t,n){"use strict";function r(){try{return o.apply(this,arguments)}catch(e){return a.errorObject.e=e,a.errorObject}}function i(e){return o=e,r}var o,a=n(7);t.tryCatch=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(2),u=r(s),c=n(4),l=n(0);n(10);var h=n(58),f=n(16),p=n(1),d=r(p),v=d.default.externalEventsCodes,y=function(e){h.ReplaySubject.call(this,e)};y.prototype=Object.create(h.ReplaySubject.prototype),y.prototype.hasObservers=function(){if(this.closed)throw new f.ObjectUnsubscribedError;return this.observers.length>0},y.prototype.next=function(e){var t=function(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return("x"==t?n:3&n|8).toString(16)});return t};e.uuid||(e.uuid=t()),h.ReplaySubject.prototype.next.call(this,e)},a(y.prototype,{complete:function(){},error:function(e){this.error=e,this.observers.forEach(function(t){t.isStopped=!1,t.onError(e)})},unsubscribe:function(e){this.observers.splice(e,1)},unsubscribeAll:function(){this.observers.splice(0,this.observers.length)},clean:function(){this._events=[]}});var b=function(e){this.node=e,this.subscriptions=[],this.publications=new c.Subscription};b.prototype={node:null,subscriptions:null,publications:null,hasSubscription:function(e){return this.subscriptions.filter(function(t){return t.channel===e}).length>0},publish:function(e){this.publications.add(e)},makeCallbackWithNoReplay:function(e,t){t.node.intervals||(t.node.intervals=[]),t.node.ids||(t.node.ids=[]);var n=function(t){return t.intervals[e.name]},r=function(t,n){t.intervals[e.name]=n},i=function(e){return e._events.length>0?e._events[0].time:1},o=function(t){return t.ids[e.name]},a=function(t,n){t.ids[e.name]=n},s=function(e){return e._events.length>0?e._events[0].value.uuid:null},u=function(){var u=i(e),c=n(t.node),l=s(e),h=o(t.node);return!c||c<u||c===u&&h!=l?(r(t.node,u),a(t.node,l),t.apply(this,arguments)):void r(t.node,u)}.bind(this);return u.node=t.node,u},subscribe:function(e,t,n){if(!this.hasSubscription(e)){var r=t;n===!1&&(r=this.makeCallbackWithNoReplay(e,t));var i=this._firstInstanceOfObserver(r.node,e);i===-1&&(e.subscribe(r),i=e.observers.length-1),e.observers[i].node=r.node;var o={channel:e,observer:e.observers[i]};this.subscriptions.push(o)}},unsubscribe:function(){for(var e=this.subscriptions.length-1;e>=0;e--){var t=this.subscriptions[e],n=t.channel,r=t.observer,i=n.observers.indexOf(r);n.name.match(/\b__bridge_/)||n.unsubscribe(i)}this.publications.unsubscribe()},_firstInstanceOfObserver:function(e,t){for(var n=-1,r=0;r<t.observers.length;r++)if(t.observers[r].node===e){n=r;break}return n}};var g=function(){this.channels={}};g.prototype={channels:null,get:function(e){var t=this.channels[e];return null==t&&(t=this.create(e)),t},getUnsafe:function(e){return this.channels[e]},create:function(e){var t=new y(1);return t.name=e,this.channels[e]=t},remove:function(e){delete this.channels[e]},has:function(e){return null!=this.channels[e]}};var m=function(){function e(){i(this,e),this.manager=null,this.subscriptors=null,this.bridgeChannelsPrefix=null,this.manager=new g,this.subscriptors=new WeakMap,this.bridgeChannelsPrefix=/__bridge_(?!ch)/}return o(e,[{key:"getSubscriptor",value:function(e){var t=this.subscriptors.get(e);return t||(t=new b(e),this.subscriptors.set(e,t)),t}},{key:"register",value:function(e,t){e&&t&&(this._registerOutConnections(e,t.out),this._registerInConnections(e,t.in))}},{key:"progressiveRegister",value:function(e,t){e&&t&&(this._registerOutConnections(e,t.out),this._updateInConnections(e,t.in))}},{key:"_registerInConnections",value:function(e,t){var n=void 0,r=void 0,i=void 0;if(t)for(n in t)r=t[n].bind,i=t[n].previousState||!1,this.addSubscription(n,e,r,i)}},{key:"addSubscription",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this._wrapCallbackWithNode(t,n),o=this.manager.get(e);if(o){var a=this.getSubscriptor(t);a.subscribe(o,i,r)}}},{key:"_updateInConnections",value:function(e,t){var n=void 0,r=void 0,i=void 0;if(t)for(n in t)r=t[n].bind,i=t[n].previousState||!1,this.updateSubscription(n,e,r,i)}},{key:"updateSubscription",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.getSubscriptor(t);if(this.isActiveBridgeChannel(e)||!this.isActiveBridgeChannel(e)&&!this.hasSubscriptions(i,e)){var o=this.manager.get(e),a=this._wrapCallbackWithNode(t,n);i.subscribe(o,a,r)}}},{key:"_wrapCallbackWithNode",value:function(e,t){var n=this.wrapCallback(e,t);return n.node=e,n}},{key:"_hasPublisher",value:function(e,t,n,r){var i=!1;return e.publications._subscriptions&&e.publications._subscriptions.forEach(function(e){e.node===t&&e.channelName===n&&e.eventName===r&&(i=!0)}),i}},{key:"_registerOutConnections",value:function(e,t){var n=void 0,r=void 0;if(t)for(n in t)r=t[n].bind,this.addPublication(n,e,r,t[n])}},{key:"addPublication",value:function(e,t,n,r){if(this.isBridgeChannel(e))console.warn("Forbidden operation. You are trying to write to a private channel ("+e+").");else{var i=this.getSubscriptor(t),o=this.manager.get(e),a=this._hasPublisher(i,t,e,n);a||i.publish(this.wrapEvent(t,n,o,r))}}},{key:"publish",value:function(e,t){if(this.isBridgeChannel(e))console.warn("Forbidden operation. You are trying to write to a private channel ("+e+").");else{var n=this.manager.get(e),r=e+"-publish";n.next(new CustomEvent(r,{detail:t}))}}},{key:"unregister",value:function(e){if(e){var t=this.subscriptors.get(e);t&&(t.unsubscribe(),this.subscriptors.delete(e))}}},{key:"sleep",value:function(e){if(e){var t=this.subscriptors.get(e);t&&console.log(t)}}},{key:"wrapCallback",value:function(e,t){var n=function(n){"function"==typeof t?t(n.detail):"function"==typeof e[t]?e[t](n.detail):e[t]=n.detail};return n}},{key:"_isEventAtTarget",value:function(e){var t=Event.AT_TARGET||Event.prototype.AT_TARGET;return e.eventPhase===t}},{key:"wrapEvent",value:function(e,t,n,r){var i=v.AFTER_PUBLISH,o=v.NAV_REQUEST,a=v.ROUTER_BACKSTEP,s=v.TRACK_EVENT,c=v.LOG_EVENT,h=l.Observable.fromEvent(e,t),f=h.subscribe(function(e){if(this._isEventAtTarget(e)){if(n.next(e),u.default.emit(i,e),r&&r.link){var t=r.link;r.link.page&&r.link.page.hasOwnProperty("bind")&&(t.page=e.detail[r.link.page.bind]),u.default.emit(o,{event:e,detail:t})}r&&r.backStep&&u.default.emit(a,{event:e,detail:{}}),r&&r.analytics&&u.default.emit(s,{event:e,detail:r.analytics}),r&&r.log&&u.default.emit(c,{event:e,detail:r.log}),this.wrapEventHandler&&this.wrapEventHandler(e,r,n)}}.bind(this));return f.node=e,f.eventName=t,f.channelName=n.name,f}},{key:"createEvent",value:function(e,t){var n=new Event(e);return n.detail={value:t},n}},{key:"isActiveBridgeChannel",value:function(e){return this.isBridgeChannel(e)&&this.manager.getUnsafe(e)}},{key:"isBridgeChannel",value:function(e){return this.bridgeChannelsPrefix.test(e)}},{key:"hasSubscriptions",value:function(e,t){return e.subscriptions.filter(function(e){return e.channel.name===t}).length>0}}]),e}();t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),c=r(u),l=n(1),h=r(l),f=h.default.externalEventsCodes,p=function(){function e(){i(this,e)}return s(e,[{key:"createComponents",value:function(e){if(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e[r];t[n]=this.createElement(i.tagName),t[n].__zone=i.zone,n++}return t}}},{key:"setAttrs",value:function(e,t){var n=f.BEFORE_SET_ATTR_TO_NODE,r=f.AFTER_SET_ATTR_TO_NODE;t&&"object"===("undefined"==typeof t?"undefined":a(t))&&(c.default.emit(n,e.tagName),o(e,t),c.default.emit(r,e))}},{key:"createElement",value:function(e,t){var n=f.BEFORE_CREATE_NODE,r=f.AFTER_CREATE_NODE;c.default.emit(n,e);var i=document.createElement(e);return c.default.emit(r,i),t&&this.setAttrs(i,t),i}}]),e}();t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(23),s=r(a),u=n(2),c=r(u),l=n(1),h=r(l),f=h.default.bindingCodes,p=h.default.externalEventsCodes,d=function(){function e(){i(this,e),this.cache={},this.templates={},this.selected=""}return o(e,[{key:"create",value:function(e,t){var n=this.get(e);return n||(n=this._createFromJSON(e,t),this._storeTemplate(e,n)),n}},{key:"createFromComponent",value:function(e,t){var n=this._createCellsTemplate(e,{tagName:t});return this._storeTemplate(e,n),n}},{key:"register",value:function(e,t){var n=this._createFromHTMLElement(e,t);return this._storeTemplate(e,n),n}},{key:"_storeTemplate",value:function(e,t){var n=t.node;this.cache[e]=t,this.templates[e]=n}},{key:"_createFromHTMLElement",value:function(e,t){var n=this._createCellsTemplate(e,{node:t});return n}},{key:"_createFromJSON",value:function(e,t){var n=this._createCellsTemplate(e,t);return n}},{key:"_createCellsTemplate",value:function(e,t){return new s.default(e,t)}},{key:"get",value:function(e){return this.cache[e]}},{key:"getNode",value:function(e){return this.templates[e]}},{key:"parseTemplateName",value:function(e){return e}},{key:"parseTemplateId",value:function(e){return"cells-template-"+e.replace(/\./g,"-")}},{key:"select",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"always",r=p.TEMPLATE_TRANSITION_END,i=f.CURRENTVIEW,o=f.UI,a=this.get(e),s=this.cache,u=void 0;for(var l in s)l===this.selected?(u=l,s[l].deactivate()):e!==l&&s[l].cache();this.selected=e,a.activate(),t&&n!==i&&n!==o&&(t.updateAppContext(u,e),t.initPrivateChannel(u,e)),c.default.emit(r,a)}},{key:"removeTemplate",value:function(e){if(this.templates[e]){var t=document.querySelector("#"+this.templates[e].id);t.parentNode.removeChild(t),delete this.templates[e],delete this.cache[e]}}},{key:"removeTemplates",value:function(e,t){for(var n in this.templates)n!==e&&n!==t&&this.removeTemplate(n)}},{key:"removeTemplateChildrens",value:function(e){var t=this.templates[e];if(t&&t.children)for(var n=t.children.length-1;n>=0;n--)t.removeChild(t.children[n])}}]),e}();t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(24),c=r(u),l=c.default.dasherize,h=function(e){var t=e.familyPath,n=e.tag,r=e.tagName,i=n||r,o=t||i;return o+"/"+i+".html"},f=function(){function e(){o(this,e)}return s(e,[{key:"_buildConfig",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"UI",n=e.type,r=e.tag,i=e.tagName,o=e.zone,a=e.fixed,s=e.priority,u=e.properties,c=h(e),l=n?n.toUpperCase():t,f={type:l,tagName:r||i,zone:o,fixed:a,priority:s,properties:u,path:c};return this._parseConnections(f)}},{key:"parse",value:function(e){var t=[],n=/^\/(\b)/;t.push.apply(t,i(this._parseComponentsFromJson(e,"components","UI")));var r=e.template;r&&(r=this._buildConfig(r,"TEMPLATE"));var o={},a=e.pages;if(a)for(var s=0;s<Object.keys(a).length;s++){var u=Object.keys(a)[s];o[u]="/"+a[u].url.replace(n,"")}return{page:e.page,currentPage:e.currentPage||{},template:r,components:t,pages:o}}},{key:"_parseComponentsFromJson",value:function(e,t,n){var r=[],i=e[t];if(Array.isArray(i))for(var o=0;o<i.length;o++){var a=i[o];r.push(this._buildConfig(a,n))}return r}},{key:"_parseConnections",value:function(e){var t=this._normalizeComponentDefinition(e),n=t.properties.cellsConnections;if(!n||!Object.keys(n).length>0)return t;var r=a({},t);if(n.params){var i=this._parseConnectionsParams(n.params);n.in||(n.in={}),n.out||(n.out={}),a(n.in,i.in),a(n.out,i.out)}return r.connections=n,r}},{key:"_normalizeComponentDefinition",value:function(e){var t={cellsConnections:{in:{},out:{}}},n=a({},e);return n.properties=n.properties||t,n}},{key:"_parseConnectionsParams",value:function(e){var t={in:{},out:{}};for(var n in e){var r=e[n],i=l(n)+"-changed";t.in[r]=this._createConnection(n),t.out[r]=this._createConnection(i)}return t}},{key:"_createConnection",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{bind:e,global:t}}},{key:"split",value:function(e){var t;if(e){t={CC:[],UI:[],DM:[]};for(var n=0;n<e.length;n++){var r=e[n];t[r.type].push(r)}}return t}}]),e}();t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,
r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(9),l=r(c),h=function(e){function t(){var e,n,r,a;i(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.children=[],r.fixedChildren=[],r.type="TEMPLATE",a=n,o(r,a)}return a(t,e),u(t,[{key:"getZone",value:function(e){var t,n=this.node;return t=e?n.$&&n.$[e]?n.$[e]:n.querySelector("#"+e):n,t||n}},{key:"cache",value:function(){this._setAttribute("state","cached")}},{key:"activate",value:function(){this._setAttribute("state","active")}},{key:"deactivate",value:function(){this._setAttribute("state","inactive")}},{key:"native",value:function(){this._setAttribute("state","native")}},{key:"resetNextNavigation",value:function(){this._getTemplate(this.node)._nextNavigation=void 0}},{key:"_setAttribute",value:function(e,t){var n=this._getTemplate(this.node);n.setAttribute(e,t)}},{key:"_getTemplate",value:function(e){var t=e.tagName,n=t.toLowerCase().endsWith("-page");return n?this._getCellsTemplateFromShadowRootChildNodes(e):e}},{key:"_getCellsTemplateFromShadowRootChildNodes",value:function(e){return Array.from(e.shadowRoot.childNodes).find(function(e){return e&&e.tagName&&e.tagName.toLowerCase().indexOf("cells-template")!==-1})}},{key:"append",value:function(e){if(e){void 0===e.length&&(e=[e]);var t=e.filter(function(e){return e.fixed!==!0}),n=e.filter(function(e){return e.fixed===!0});this.fixedChildren=this.fixedChildren.concat(n),this.children=this.children.concat(e);for(var r=[],i=0;i<t.length;i++){var o=t[i];o.node.setAttribute("data-select",o.zone),o.node.setAttribute("slot",o.zone),"object"!==s(r[o.zone])&&(r[o.zone]=this.getZone(o.zone)),r[o.zone].appendChild(o.node)}}}},{key:"config",value:function(e){var t=e.name,n=e.template,r=n.id,i=n.name;this.name=t,this.node.id=r,this.node.name=i,this.setProps()}}]),t}(l.default);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.dasherize=function(e){return e.trim().replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase()},i=t.camelize=function(e){return e.trim().replace(/(-|_|\s)+(.)?/g,function(e,t,n){return n?n.toUpperCase():""})};t.default={dasherize:r,camelize:i}},function(e,t,n){"use strict";function r(e){var t=e.tagName.indexOf("-")>-1,n=e.__isPolymerInstance__===!0,r=void 0!==Polymer.Element&&e instanceof Polymer.Element||void 0!==Polymer.ElementMixin&&e instanceof Polymer.ElementMixin||void 0!==Polymer.LegacyElementMixin&&e instanceof Polymer.LegacyElementMixin||void 0!==e.is&&void 0!==e.ready&&void 0!==e.notifyPath;return t&&!n&&!r}Object.defineProperty(t,"__esModule",{value:!0}),t.isPolymerElementUnresolved=r,t.default={isPolymerElementUnresolved:r}},function(e,t,n){"use strict";t.empty={closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}}},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(4),o=function(e){function t(t,n){e.call(this),this.subject=t,this.subscriber=n,this.closed=!1}return r(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);n!==-1&&t.splice(n,1)}}},t}(i.Subscription);t.SubjectSubscription=o},function(e,t,n){"use strict";function r(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),i.mergeMap(o.identity,null,e)}var i=n(84),o=n(94);t.mergeAll=r},function(e,t,n){"use strict";function r(e,t){return void 0===t&&(t=0),function(n){return n.lift(new s(e,t))}}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(3),a=n(56);t.observeOn=r;var s=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.scheduler,this.delay))},e}();t.ObserveOnOperator=s;var u=function(e){function t(t,n,r){void 0===r&&(r=0),e.call(this,t),this.scheduler=n,this.delay=r}return i(t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.add(this.scheduler.schedule(t.dispatch,this.delay,new c(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(a.Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(a.Notification.createError(e))},t.prototype._complete=function(){this.scheduleMessage(a.Notification.createComplete())},t}(o.Subscriber);t.ObserveOnSubscriber=u;var c=function(){function e(e,t){this.notification=e,this.destination=t}return e}();t.ObserveOnMessage=c},function(e,t,n){"use strict";t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},function(e,t,n){"use strict";t.isArrayLike=function(e){return e&&"number"==typeof e.length}},function(e,t,n){"use strict";function r(e){return null!=e&&"object"==typeof e}t.isObject=r},function(e,t,n){"use strict";function r(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}t.isPromise=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(35),h=r(l),f=n(47),p=r(f),d=n(49),v=r(d),y=n(48),b=r(y),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(e.avoidPolymerEventCache===!0){var r=Polymer.Base._getEvent;Polymer.Base._getEvent=function(e,t,n){return r(e,t,n,!1)}}return n}return a(t,e),u(t,[{key:"_initDependencies",value:function(e){e=s({ComponentConnector:p.default,TemplateManager:v.default},e),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDependencies",this).call(this,e)}},{key:"_createCellsComponent",value:function(e,t){return new b.default(e,t)}}]),t}(h.default);t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(20),c=r(u),l=n(40),h=r(l),f=n(19),p=r(f),d=n(45),v=r(d),y=n(22),b=r(y),g=n(2),m=r(g),_=n(39),E=r(_),w=n(21),O=r(w),k=n(9),P=r(k),S=n(38),T=r(S),C=n(37),x=r(C),A=n(24),R=r(A),j=n(1),I=r(j),N=n(42),M=r(N),L=R.default.dasherize,D=R.default.camelize,U=I.default.bindingCodes,F=I.default.binding,B=I.default.componentsPath,H=I.default.composerEndpoint,G=I.default.externalEvents,V=I.default.externalEventsCodes,z=I.default.initialTemplate,q=I.default.pagesPath,W=I.default.prplCodes,Y=I.default.prpl,K=F.DEFAULT,Q=Y.DEFAULT,$=0,J={},X=function(){function e(t){var n=this;i(this,e),this.ComponentConnector=null,this.DomManager=null,this.ImportManager=null,this.PageManager=null,this.Router=null,this.TemplateManager=null,this.Sanitizer=null,this.BridgeChannelManager=null,this.binding=K,this.prplLevel=Q,this.cache=!0,this.channel="global",this.componentsPath=B,this.templatesPath="",this.crossContainerId="__cross",this.debug=!0,this.preCache=!1,this.preRender=!1,this.storagePrefix="__bridge-",this.version="3.4.5",this.viewLimit=6,this.initialTemplate=z,this.__mainNodeElement=null,this.externalEvents=G,this.pages=[],this.pagesPath=q,this.remoteTemplates=[],this.appId="",this.composerEndpoint=H,this.templatesPath="",this.monitoring=null,this.logs=!1;var r=V.NAV_REQUEST,s=V.ROUTER_BACKSTEP;t&&"object"===("undefined"==typeof t?"undefined":a(t))||(t={}),t.prplLevel=this._normalizePrplLevel(t.prplLevel);var u=t.dependencies;delete t.dependencies,o(this,t),this._initDependencies(u),"global"===this.channel&&(this.ComponentConnector.manager.channels=J),this.mainNode?this._plugExternalEvents():console.warn("You should indicate the main node of your app"),this.id=$++,this._initCrossComponents(),this.cache&&(this.PageManager.persistent=!0),this.generateRequestUrl&&(console.assert("function"==typeof this.generateRequestUrl,"generateRequestUrl has to be a function"),this.PageManager.generateRequestUrl=this.generateRequestUrl),this.onPageDefinitionNotFound&&(console.assert("function"==typeof this.onPageDefinitionNotFound,"onPageDefinitionNotFound has to be a function"),this.PageManager.onPageDefinitionNotFound=this.onPageDefinitionNotFound),window.$core=window.$core||[],this.debug?(window.$core.push(this),this.printDebugInfo()):window.$core.push({log:function(e){return n.log(e)},ingest:function(e){return n.ingestSpans(e)},createSpan:function(e){return n.createSpan(e)},createUUID:function(){return n.createUUID()},logout:function(){return n.logout()},subscribeToEvent:function(e,t){return n.subscribeToEvent(e,t)},registerInConnection:function(e,t,r){return n.registerInConnection(e,t,r)},registerOutConnection:function(e,t,r){return n.registerOutConnection(e,t,r)},publish:function(e,t){return n.publish(e,t)},navigate:function(e,t){return n.navigate(e,t)}}),window.cells=window.$core[0],this.BridgeChannelManager.initAppContextChannel(),this.BridgeChannelManager.getCancelledBackNavigationChannel(),this.ActionChannelManager.subscribeAll(),this._executePendingBridgeQueue(),this.logs&&this._logBridgeReady(),this.Router.handler=function(){return n.routeHandler()},this.Router.addRoutes(this.routes),this._initSkipNavigations(),this.Router.start(),m.default.on(r,function(e){var n=e.event,r=e.detail,i=r.page,a=r.params,s=r.skipHistory,u=r.replace||!1,c={};if(!i&&r.paramPage&&n.detail&&(i=n.detail[r.paramPage]),n.detail&&a)for(var l in a)a.hasOwnProperty(l)&&(c[a[l]]=n.detail[l]);this.Router.go(i,c,u,s),o(this,t)}.bind(this)),m.default.on(s,function(e){return n.handleBack(e)})}return s(e,[{key:"goBack",value:function(){return this.Router.back()}},{key:"handleBack",value:function(){this.goBack()}},{key:"_executePendingBridgeQueue",value:function(){if(window.cellsBridgeQueue&&window.cellsBridgeQueue.length){for(var e=0;e<window.cellsBridgeQueue.length;e++){var t=window.cellsBridgeQueue[e],n=t.command,r=t.parameters,i=this[n];if(!i)return void console.log("WARNING: Invalid cells bridge command execution: "+n+" (QUEUE).");console.log("Executing queued command "+n+"."),i.apply(this,r)}delete window.cellsBridgeQueue}}},{key:"_logBridgeReady",value:function(){var e=this.appId,t=this.version,n=this.binding,r=this.prplLevel,i=this.cache,o=this.preCache,a=this.preRender,s="cells-bridge::ready",u={appId:e,version:t,binding:n,href:window.location.href,prplLevel:r,cache:i,preCache:o,preRender:a},c={message:s,properties:u};this.logBridge(c)}},{key:"_initSkipNavigations",value:function(){if(this.skipNavigations&&this.skipNavigations.length>0){for(var e=0;e<this.skipNavigations.length;e++)this.skipNavigations[e].skipHistory=!0;this.Router.addSkipNavigations(this.skipNavigations)}}},{key:"_normalizePrplLevel",value:function(e){var t=Y.VALUES,n=void 0;return n=t.indexOf(e)>-1?e:t[e]||Q}},{key:"_plugExternalEvents",value:function(){var e=this,t=this.externalEvents.length,n=this.getMainNode(),r=function(e,t){var r=t?new CustomEvent(e,{detail:t}):new CustomEvent(e);n.dispatchEvent(r)};if(n){for(var i=function(t){var n=e.externalEvents[t];m.default.on(n,function(t){r(n,t),e.logs&&e.monitor(n,t)})},o=0;o<t;o++)i(o);this._initEventChannels()}else console.warn("The defined main node does not exist")}},{key:"monitor",value:function(e,t){var n=V.LOG_EVENT,r=e===n,i=r||this.isBridgeLoggableEvent(e);if(i){var o=this.monitoring.buildLog(e,t),a=r?"log":"logBridge";this[a](o)}}},{key:"isBridgeLoggableEvent",value:function(e){return this.monitoring.isBridgeLoggableEvent(e)}},{key:"log",value:function(e){this.hasApplicationLoggingEnabled()&&this.monitoring.logApplication(e)}},{key:"logBridge",value:function(e){this.monitoring.logBridge(e)}},{key:"ingest",value:function(e){this.hasApplicationLoggingEnabled()&&this.monitoring.ingest(e)}},{key:"createSpan",value:function(e){if(this.hasApplicationLoggingEnabled())return this.monitoring.createSpan(e)}},{key:"createUUID",value:function(){return this.monitoring.createUUID()}},{key:"hasApplicationLoggingEnabled",value:function(){return this.monitoring.hasApplicationLoggingEnabled()}},{key:"_initEventChannels",value:function(){var e=this.getMainNode();this.BridgeChannelManager.initEventChannels(e,this.externalEvents),this._addInitialSubscribersToEvents()}},{key:"_addInitialSubscribersToEvents",value:function(){this.eventSubscriptions&&this.eventSubscriptions.length>0&&this._subscribeToEvents(this.eventSubscriptions)}},{key:"_subscribeToEvents",value:function(e){var t=this;e.forEach(function(e){var n=e.event,r=e.callback;t.subscribeToEvent(n,r)})}},{key:"_initCrossComponents",value:function(){var e=this.TemplateManager.parseTemplateId(this.crossContainerId),t=this.TemplateManager.get(e),n=document.getElementById(e);t||(n?this.TemplateManager.register(this.crossContainerId,n):(t=this.TemplateManager.create(this.crossContainerId,{tagName:"div"}),document.body.appendChild(t.node)))}},{key:"_initDependencies",value:function(e){e=o({ComponentConnector:p.default,DomManager:c.default,ImportManager:E.default,PageManager:h.default,TemplateManager:O.default,Router:v.default,Sanitizer:b.default,BridgeChannelManager:T.default,ActionChannelManager:x.default,monitoring:M.default},e);for(var t in e)e.hasOwnProperty(t)&&(this[t]=new e[t](this))}},{key:"_createCellsComponent",value:function(e,t){return new P.default(e,t)}},{key:"createCCComponent",value:function(e){var t=this.TemplateManager.get(this.crossContainerId),n=t.node.querySelector(e.tagName);if(!n){var r=this._createCellsComponent(e,this);return r.__parentTemplate=t,this.ComponentConnector.register(r.node,r.spec.connections),r}this.ComponentConnector.progressiveRegister(n,e.connections)}},{key:"createUIComponent",value:function(e){var t=U.ALWAYS,n=U.DELAYED,r=U.UI,i=this.binding,o=this._createCellsComponent(e,this);return i!==t&&i!==n&&i!==r||this.ComponentConnector.register(o.node,o.connections),o}},{key:"createDMComponent",value:function(e){var t=U.ALWAYS,n=U.DELAYED,r=this.binding,i=this._createCellsComponent(e,this);return r!==t&&r!==n||this.ComponentConnector.register(i.node,i.connections),i}},{key:"_createLocalComponent",value:function(e,t,n){for(var r=[],i=0,o=t.length;i<o;i++){var a=t[i],s=this["create"+e+"Component"](a);s&&(s.__parentTemplate=s.__parentTemplate||n,r.push(s))}return r}},{key:"createComponentsByType",value:function(e,t){for(var n=[],r=["CC","UI","DM"],i=0,o=r.length;i<o;i++){var a=r[i],s=e[a];n=n.concat(this._createLocalComponent(a,s,t))}return n}},{key:"_createComponents",value:function(e,t){for(var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=V.PAGE_READY,o=e.page,a=this,s=this.Sanitizer.split(e.components),u=this.createComponentsByType(s,t),c=[],l=[],h=0,f=u.length;h<f;h++){u[h].setProps();var p=u[h],d=p.__parentTemplate.name;l[d]||(l[d]=this.TemplateManager.get(d)),l[d].append(p),p.isUnresolved()&&c.push(p)}switch(m.default.emit(i,{page:o,components:e.components.map(function(e){return e.tagName}).join(", ")}),this.prplLevel){case W.NONE:case W.DEFER:this.ImportManager.loadComponent(c,a.componentsPath).then(function(){n.selectTemplate(o,r)});break;case W.PROGRESSIVE:this.ImportManager.loadComponent(c,a.componentsPath);break;case W.HERO:this.selectTemplate(o,r),this.ImportManager.loadComponentByPriority(c,a.componentsPath)}}},{key:"createPageFromPolymerWebComponent",value:function(e){var t=e+"-page",n=this.TemplateManager.getNode(e);return this.BridgeChannelManager.getPrivate(e),!n&&(n=this.TemplateManager.createFromComponent(e,t),n.isUnresolved())?this.loadPolymerWebComponent(e):Promise.resolve()}},{key:"_isLocalTemplate",value:function(e){var t=!0;return this.composerEndpoint&&this.remoteTemplates&&(t=this.remoteTemplates.indexOf(e)===-1),t}},{key:"createTemplate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e,i=e.page,o=this.TemplateManager.getNode(i);this.BridgeChannelManager.getPrivate(i),o?this.selectTemplate(i,n):r&&r.template&&(this.prplLevel===W.DEFER&&this._isLocalTemplate(i)?this.ImportManager.loadBundleForTemplate(this.componentsPath,i).then(function(){t._createTemplateFromSpec(i,r,n)}):this._createTemplateFromSpec(i,r,n)),this._preRender(e,n)}},{key:"_preRender",value:function(e,t){var n=this;if((this.preCache===!0||this.preRender===!0)&&e.pages)for(var r in e.pages){var i=r===name||this.TemplateManager.cache[r];i||this.loadTemplate(r).then(function(e){if(n.preRender&&t===!1){var r=!0;e.page?n._idleCallback(function(){return n.createTemplate(e,r)}):console.warn("Missing page. ",e)}})}}},{key:"_createTemplateFromSpec",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.TemplateManager.create(e,t.template);if(this.prplLevel===W.PROGRESSIVE&&this.selectTemplate(e,r),this.ComponentConnector.register(i.node,i.connections),t.pages&&this.Router.addRoutes(t.pages),i.isUnresolved())switch(this.prplLevel){case W.NONE:case W.DEFER:this.ImportManager.loadComponent(i,this.componentsPath).then(function(){n._createComponents(t,i,r)});break;case W.PROGRESSIVE:case W.HERO:this._createComponents(t,i,r)}else this._createComponents(t,i,r)}},{key:"parseTemplateId",value:function(e){return"cells-template-"+e.replace(/\./g,"-")}},{key:"parse",value:function(e,t){return e=D("parse-"+e),"function"==typeof this[e]?this[e](t):t}},{key:"printDebugInfo",value:function(){var e=function(e,t){var n=e?t:"#b0bec5";return"background:"+n+"; color:#fff; padding:2px 4px; margin-right: 5px;"};console.log("%cbridge version: "+this.version+" %cbinding: "+this.binding+" %cprplLevel: "+this.prplLevel+" %ccache: "+this.cache+" %cpreCache: "+this.preCache+" %cpreRender: "+this.preRender+" %clogs: "+this.logs,e(this.version,"#003f8d"),e(this.binding,"#0065ba"),e(this.prplLevel,"#008ff2"),e(this.cache,"#0093e2"),e(this.preCache,"#00aeeb"),e(this.preRender,"#41cef8"),e(this.logs,"#0025ad")),this.id>0&&console.log("%cWARNING: There are "+(this.id+1)+" simultaneous instances of the Bridge running.",e(this.id,"#FF0000"))}},{key:"routeHandler",value:function(){var e=V.PARSE_ROUTE,t=this.Router.currentRoute;m.default.emit(e,t),this._handleRouteLoading(t);for(var n in t.params)if(t.params.hasOwnProperty(n)){var r={detail:{value:t.params[n]},type:L(n)+"-changed"};this.ComponentConnector.manager.get(n).next(r)}}},{key:"isRoutableComponent",value:function(e){return this.pages.indexOf(e.name)>=0}},{key:"loadTemplate",value:function(e,t){var n=this.cache,r=this.method,i=this.body,o=this.headers,a=this.app,s=this.templatesPath,u={cache:n,params:t,method:r,body:i,headers:o},c={app:a,templates:s};return this.PageManager.get(e,u,c)}},{key:"loadPolymerWebComponent",value:function(e){var t=Array(2).fill(e+"-page").join("/"),n={spec:{path:t+".html"}};return this.ImportManager.loadComponent(n,this.pagesPath)}},{key:"_handleRouteLoading",value:function(e){var t=this;this.isRoutableComponent(e)?this.createPageFromPolymerWebComponent(e.name).then(function(){return t.selectPage(e.name,e.params)}):this.loadTemplate(e.name,e.params).then(function(e){return t.createTemplate(e)})}},{key:"registerCurrentTemplate",value:function(e,t){var n=V.TEMPLATE_REGISTERED,r=U.UI,i=this;this.registerChildren(e,i.binding===r?"DM":null),t&&t!==e&&this.unregisterChildren(t,i.binding===r?"DM":null),this._updateChannels(t,e),m.default.emit(n,{template:e.name})}},{key:"_updateChannels",value:function(e,t){if(this.BridgeChannelManager){var n=e?e.name:void 0;this.BridgeChannelManager.updateAppContext(n,t.name),this.BridgeChannelManager.initPrivateChannel(n,t.name)}}},{key:"registerChildren",value:function(e,t){for(var n=0;n<e.children.length;n++){var r=e.children[n];(t&&t===r.type||!t)&&this.ComponentConnector.register(r.node,r.connections)}}},{key:"unregisterChildren",value:function(e,t){for(var n=0;n<e.children.length;n++){var r=e.children[n];(t&&t===r.type||!t)&&this.ComponentConnector.unregister(r.node)}}},{key:"registerInConnection",value:function(e,t,n){this.ComponentConnector.addSubscription(e,t,n)}},{key:"registerOutConnection",value:function(e,t,n){this.ComponentConnector.addPublication(e,t,n)}},{key:"publish",value:function(e,t){this.ComponentConnector.publish(e,t)}},{key:"navigate",value:function(e,t){this.Router.go(e,t)}},{key:"selectPage",value:function(e,t){var n=V.TEMPLATE_REGISTERED,r=this.TemplateManager.get(e),i=this.TemplateManager.get(this.TemplateManager.selected),o=i?i.name:null;this.onRender&&this.onRender(r.node),this._handleParams(r.node,t),this.TemplateManager.select(e,this.BridgeChannelManager,this.binding),this.BridgeChannelManager&&(this.BridgeChannelManager.updateAppContext(o,e),this.BridgeChannelManager.initPrivateChannel(o,e)),m.default.emit(n,{template:e})}},{key:"_handleParams",value:function(e,t){var n=e.params&&Object.keys(t).length>0;n&&(e.params=t)}},{key:"selectTemplate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=V.TEMPLATE_TRANSITION_END,i=U.CURRENTVIEW,o=U.UI,a=U.DELAYED,s=this,u=this.TemplateManager.get(e);if((s.binding===i||s.binding===o)&&n!==!0){var c=this.TemplateManager.get(this.TemplateManager.selected),l=function(){return t.registerCurrentTemplate(u,c)};u.node.animationCompleteEvent?m.default.listenToOnce(u.node,u.node.animationCompleteEvent,l):m.default.once(r,l)}if(s.onRender&&(u.fixedChildren.length>0?s.onRender(u.node,u.fixedChildren):s.onRender(u.node)),n!==!0){var h=function(){return t.TemplateManager.select(e,t.BridgeChannelManager,s.binding)};s.binding===a?this._idleCallback(h):h()}}},{key:"_idleCallback",value:function(e){this.BridgeChannelManager.getIdleCallbackChannel().first().subscribe(e)}},{key:"subscribeToEvent",value:function(e,t){if(this.externalEvents.indexOf(e)<0)return void console.warn("Trying to subscribe to a non existing event: ",e);if("function"!=typeof t)return void console.warn("You must provide a function callback to subscribe to the event: ",e);var n=this.getMainNode();this.BridgeChannelManager.subscribeToEvent(n,e,t)}},{key:"getMainNode",value:function(){return this.__mainNodeElement||(this.__mainNodeElement=document.querySelector("#"+this.mainNode)),this.__mainNodeElement}},{key:"_resetBridgeChannels",value:function(){this.BridgeChannelManager.resetBridgeChannels(this.getMainNode())}},{key:"logout",value:function(){var e=this,t=V.TEMPLATE_REGISTERED;if(this.TemplateManager.selected!==this.initialTemplate){var n=function(){return e.TemplateManager.removeTemplates(e.initialTemplate,e.crossContainerId)},r=function(){return e.TemplateManager.removeTemplateChildrens(e.crossContainerId)},i=function(){return e.TemplateManager.removeTemplate(e.initialTemplate)};this._resetBridgeChannels(),r(),i(),m.default.once(t,n),this._addInitialSubscribersToEvents(),this.Router.init(),this.Router.go(this.initialTemplate)}}}]),e}();t.default=X},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"_get",value:function(e,t){return new Promise(function(n,r){var i=new XMLHttpRequest;if(!e||!e.url)return void r(new Error("URL not defined"));var o=(e.method||"").toUpperCase()||"GET";i.addEventListener("load",function(e){var i=e.target,o=i.status;o>=200&&o<300||0==o&&i.responseText.length>0?n("json"===t?JSON.parse(i.response):i.responseText):r(new Error(i.statusText))}),i.addEventListener("error",function(){r(new Error("Network Error"))}),i.open(o,e.url);var a=e.headers;for(var s in a)a.hasOwnProperty(s)&&i.setRequestHeader(s,a[s]);i.send(e.body)})}},{key:"getJSON",value:function(e){return this._get(e,"json")}},{key:"getHTML",value:function(e){return this._get(e,"html")}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),s=r(a),u=n(1),c=r(u),l=c.default.externalEventsCodes,h=function(){function e(t){i(this,e),this.bridge=t,this.PageManager=t.PageManager,this.ChannelManager=t.BridgeChannelManager,this.TemplateManager=t.TemplateManager}return o(e,[{key:"subscribeAll",value:function(){var e=this;this.ChannelManager.getBridgeChannel("config").subscribe(function(t){return e._configSubscriptor(t)}),this.ChannelManager.getBridgeChannel("locales").subscribe(function(t){return e._localesSubscriptor(t)}),this.ChannelManager.getBridgeChannel("logout").subscribe(function(t){return e._logoutSubscriptor(t)})}},{key:"_isAllowedProperty",value:function(e){return"function"!=typeof this.bridge[e]}},{key:"_configSubscriptor",value:function(e){var t=this,n=l.TEMPLATE_REGISTERED,r=this.TemplateManager.selected;if(e.detail){for(var i in e.detail)this._isAllowedProperty(i)&&(this.bridge[i]=e.detail[i]);(e.detail.app||e.detail.pagesPath)&&(this.PageManager.clear(),this.TemplateManager.removeTemplates(r,this.bridge.crossContainerId),s.default.once(n,function(){return t.TemplateManager.removeTemplate(r)}))}}},{key:"_localesSubscriptor",value:function(e){window.I18nMsg&&e.detail&&e.detail.lang&&(window.I18nMsg.lang=e.detail.lang)}},{key:"_logoutSubscriptor",value:function(){this.bridge.logout(),this.subscribeAll()}}]),e}();t.default=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0);n(10),n(63);var a=function(){function e(t){r(this,e),this.componentConnector=t.ComponentConnector,this.privateChannels=new Set}return i(e,[{key:"getAppContextChannelName",value:function(){return"__bridge_app"}},{key:"getCancelledBackNavigationChannelName",value:function(){return"__bridge_cancelled_back_navigation"}},{key:"getPrivateChannelPrefix",value:function(){return"__bridge_page_"}},{key:"getEventChannelPrefix",value:function(){return"__bridge_evt_"}},{key:"getBridgeChannelPrefix",value:function(){return"__bridge_ch_"}},{key:"getBridgeChannel",value:function(e){return this.componentConnector.manager.get(this.getBridgeChannelPrefix()+e)}},{key:"getIdleCallbackChannel",value:function(){return o.Observable.create(function(e){e.next(!0)})}},{key:"getAppContextChannel",value:function(){return this.componentConnector.manager.get(this.getAppContextChannelName())}},{key:"getCancelledBackNavigationChannel",value:function(){return this.componentConnector.manager.get(this.getCancelledBackNavigationChannelName())}},{key:"getPrivate",value:function(e){var t=this.getPrivateChannelPrefix()+e,n=this.componentConnector.manager.get(t);return this.privateChannels.add(t),n}},{key:"initAppContextChannel",value:function(){this.getAppContextChannel()}},{key:"initCancelledBackNavigationChannel",value:function(){this.getCancelledBackNavigationChannel()}},{key:"initPrivateChannel",value:function(e,t){var n=void 0,r=void 0;e&&(n=this.getPrivate(e),r=this.componentConnector.createEvent("page-load",!1),n.next(r)),n=this.getPrivate(t),r=this.componentConnector.createEvent("page-load",!0),n.next(r)}},{key:"updateAppContext",value:function(e,t){var n=this.componentConnector.createEvent("app-context",{currentPage:t,fromPage:e});this.getAppContextChannel().next(n)}},{key:"publishCancelledBackNavigation",value:function(e){var t=this.componentConnector.createEvent("back-nav-cancelled",e);this.getCancelledBackNavigationChannel().next(t)}},{key:"isPrivateChannel",value:function(e){return 0===e.indexOf(this.getPrivateChannelPrefix())}},{key:"isActivePrivateChannel",value:function(e){return this.privateChannels.has(e)}},{key:"resetBridgeChannels",value:function(e){var t=Object.keys(this.componentConnector.manager.channels);t.forEach(function(e){var t=this.componentConnector.manager.get(e);t.clean(),t.unsubscribeAll()}.bind(this)),this.componentConnector.unregister(e)}},{key:"initEventChannels",value:function(e,t){t.forEach(function(t){var n=this.getEventChannelPrefix(),r=n+t,i=this.componentConnector.manager.get(r),a=o.Observable.fromEvent(e,t);a.subscribe(function(e){i.next(e)})}.bind(this))}},{key:"subscribeToEvent",value:function(e,t,n){var r=this.getEventChannelPrefix(),i=r+t,o=this.componentConnector.getSubscriptor(e),a=this.componentConnector.manager.get(i);n.node=e,o.subscribe(a,n)}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),s=r(a),u=n(1),c=r(u),l=c.default.externalEventsCodes,h=function(e,t){return function(){if(--e<1)return t()}},f=function(){function e(){i(this,e)}return o(e,[{key:"_importElement",value:function(e,t,n){var r=document.createElement("link");r.rel="import",r.href=e+t,r.onload=n,r.onerror=n,r.setAttribute("async",""),document.head.appendChild(r)}},{key:"_importElementPromise",value:function(e,t){var n=this;
return new Promise(function(r){n._importElement(e,t,r)})}},{key:"loadBundleForTemplate",value:function(e,t,n){var r=this;return new Promise(function(i){var o=function(){n&&n.call(r),i()};r._importElement(e,t+".html",o)})}},{key:"loadComponent",value:function(e,t,n){var r=this,i=l.BEFORE_IMPORT,o=l.AFTER_IMPORT;return new Promise(function(a){var u=function(){n&&n.call(r),a()},c=e;if(Array.isArray(c)||(c=[e]),0===c.length)return void u();s.default.emit(i);for(var l=h(c.length,function(){s.default.emit(o),u()}),f=0;f<c.length;f++){var p=c[f];r._importElement(t,p.spec.path,l)}})}},{key:"loadComponentByPriority",value:function(e,t,n){var r=this,i=l.BEFORE_IMPORT,o=l.AFTER_IMPORT,a=e;if(Array.isArray(a)||(a=[e]),0===a.length)return void(n&&n.call(this));var u=this._createPriorityLists(a);s.default.emit(i),this._chainElementLoading(t,u,0).then(function(){s.default.emit(o),n&&n.call(r)})}},{key:"_createSortedArratByPriorityAndUniqueElements",value:function(e){return e.sort(function(e,t){var n=e.priority||1e3,r=t.priority||1e3;return n===r?e.spec.path<=t.spec.path?-1:1:n-r}),e.filter(function(e,t,n){return 0===t||e.spec.path!==n[t-1].spec.path})}},{key:"_createPriorityLists",value:function(e){for(var t=this._createSortedArratByPriorityAndUniqueElements(e),n=t[0].priority,r=[[]],i=0,o=0;o<t.length;o++){var a=t[o];a.priority===n?r[i].push(a):(n=a.priority,r.push([]),i=r.length-1,r[i].push(a))}return r}},{key:"_chainElementLoading",value:function(e,t,n){var r=this,i=[];if(t.length===n)return Promise.resolve();for(var o=0;o<t[n].length;o++)i.push(this._importElementPromise(e,t[n][o].spec.path));var a=n+1;return Promise.all(i).then(function(){return r._chainElementLoading(e,t,a)})}}]),e}();t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(41),u=r(s),c=n(36),l=r(c),h=n(22),f=r(h),p=n(2),d=r(p),v=n(1),y=r(v),b=y.default.externalEventsCodes,g=function(){function e(t){i(this,e),this._initCellsPageManager(t)}return a(e,[{key:"_initCellsPageManager",value:function(e){var t=e.htmlPagesPath,n=void 0===t?"./pages/":t,r=e.htmlPages,i=e.templatesPath,a=e.composerEndpoint,s=e.remoteTemplates,c=e.appId,h=e.getPlatform,p=e.cache,d=e.storagePrefix,v=new u.default({prefix:d,persistent:p}),y=new l.default,b=new f.default;o(this,{storage:v,htmlPagesPath:n,htmlPages:r,templatesPath:i,composerEndpoint:a,remoteTemplates:s,appId:c,getPlatform:h,cache:p,connector:y,sanitizer:b})}},{key:"_remoteTemplate",value:function(e){var t=this.composerEndpoint.replace(/{appId}/,this.appId);return this.getPlatform&&(t=t.replace(/{platform}/,this.getPlatform())),t=t.replace(/{page}/,e)}},{key:"_localTemplate",value:function(e){var t=this.templatesPath?this.templatesPath:this.composerEndpoint;return""+t+e+".json"}},{key:"_isLocalComposer",value:function(e){var t=!0,n=this.templatesPath&&this.templatesPath.length>0,r=this.remoteTemplates&&this.remoteTemplates.length>0,i=this.composerEndpoint&&!n&&!r;return t=i?0!==this.composerEndpoint.indexOf("http"):!this.composerEndpoint||!this.remoteTemplates||this.remoteTemplates.indexOf(e)<0}},{key:"_renderComposerEndpoint",value:function(e){return this._isLocalComposer(e)?this._localTemplate(e):this._remoteTemplate(e)}},{key:"generateRequestUrl",value:function(e){return this.htmlPages&&this.htmlPages.indexOf(e)>=0?this.htmlPagesPath+e+".html":this._renderComposerEndpoint(e)}},{key:"onPageDefinitionNotFound",value:function(e){}},{key:"clear",value:function(){this.storage.clear()}},{key:"get",value:function(e,t,n){var r=this.storage.getItem(e);return this.cache&&r?Promise.resolve(r):this._getFromConnector(e,t,n)}},{key:"_getFromConnector",value:function(e,t,n){var r=this,i=b.PAGE_REQUEST;return t=t||{},t.url=this.generateRequestUrl(e,t,n),d.default.emit(i,t),this.connector.getJSON(t).then(function(n){return r._onResponse(e,t,n)}).catch(function(t){return r._onResponseFail(e),console.error(t),t.message})}},{key:"getPage",value:function(e,t){var n=this,r=b.PAGE_REQUEST;return t=t||{},t.url=this.generateRequestUrl(e),d.default.emit(r,t),this.connector.getHTML(t).then(function(r){return n._onResponseHTML(e,t,r)}).catch(function(t){return n._onResponseFail(e),console.error(t),t.message})}},{key:"_onResponse",value:function(e,t,n){var r=b.PAGE_RESPONSE,i=b.DATA_LOAD;n.page=e,d.default.emit(r,n);var o=this.sanitizer.parse(n);return this.storage.setItem(e,o),d.default.emit(i,o),o}},{key:"_onResponseHTML",value:function(e,t,n){var r=b.PAGE_RESPONSE,i=b.DATA_LOAD,o={page:e,html:n};d.default.emit(r,o);var a={page:e,currentPage:{},template:{},components:[],pages:[],html:n};return this.storage.setItem(e,a),d.default.emit(i,a),a}},{key:"_onResponseFail",value:function(e){return this.onPageDefinitionNotFound&&this.onPageDefinitionNotFound(e),Promise.reject(new Error("Definition file for page '"+e+"' not found."))}}]),e}();t.default=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e),this.dictionary={}}return o(e,[{key:"getItem",value:function(e){return this.dictionary[e]||null}},{key:"setItem",value:function(e,t){this.dictionary[e]=t}}]),e}(),s=function(){function e(t){r(this,e),this.prefix="",this.persistent=!1,this.internalStorage=new a,i(this,t),this.persistent&&this.clear()}return o(e,[{key:"getItem",value:function(e){return JSON.parse(this.storage.getItem(this.prefix+e))}},{key:"setItem",value:function(e,t){this.storage.setItem(this.prefix+e,JSON.stringify(t,"",!0))}},{key:"clear",value:function(){var e=new RegExp("^("+this.prefix+")");for(var t in this.storage)e.test(t)&&this.storage.removeItem(t)}},{key:"storage",get:function(){var e=void 0;e=this.persistent?window.localStorage:window.sessionStorage;try{e.setItem("_$_",{})}catch(t){e=this.internalStorage}return e}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(51),u=r(s),c=n(1),l=r(c),h=n(52),f=r(h),p=f.default.get,d=f.default.set,v=l.default.monitoring.SEMAAS,y=v.mrId,b=v.nameSpace,g=v.identifier,m=v.consumerId,_=l.default.externalEventsCodes,E=_.PAGE_READY,w=_.PARSE_ROUTE,O=_.AFTER_PUBLISH,k=_.NAV_REQUEST,P=_.BEFORE_SET_ATTR_TO_NODE,S=_.AFTER_SET_ATTR_TO_NODE,T=_.BEFORE_CREATE_NODE,C=_.AFTER_CREATE_NODE,x=_.BEFORE_IMPORT,A=_.AFTER_IMPORT,R=_.PAGE_REQUEST,j=_.PAGE_RESPONSE,I=_.DATA_LOAD,N=_.TEMPLATE_TRANSITION_END,M=_.TRACK_EVENT,L=_.TEMPLATE_REGISTERED,D=_.ROUTER_BACKSTEP,U=_.LOG_EVENT,F=function(){function e(t){i(this,e),this.bridge=null,this.application=null;var n=t.semaas,r=void 0===n?{}:n,o=t.logs;if(o){var a=this.getBridgeConfiguration(r),s=this.getApplicationConfiguration(r);this.bridge=this.initilizeSEMaaSAdapter(a),this.application=this.initilizeSEMaaSAdapter(s)}}return a(e,[{key:"getBridgeConfiguration",value:function(e){var t=e.environment,n=e.policy;return{policy:n,mrId:y,nameSpace:b,identifier:g,consumerId:m,environment:t}}},{key:"getApplicationConfiguration",value:function(e){var t=e.environment,n=e.policy,r=e.mrId,i=e.nameSpace,o=e.consumerId;return{policy:n,mrId:r,nameSpace:i,identifier:"application",consumerId:o,environment:t}}},{key:"initilizeSEMaaSAdapter",value:function(e){return new u.default(e)}},{key:"logBridge",value:function(e){this.bridge.log(e)}},{key:"logApplication",value:function(e){this.application.log(e)}},{key:"ingest",value:function(e){this.application.ingest(e)}},{key:"createSpan",value:function(e){return this.application&&this.application.createSpan(e)}},{key:"createUUID",value:function(){return this.application&&this.application.createUUID()}},{key:"hasApplicationLoggingEnabled",value:function(){return!!this.application}},{key:"buildLog",value:function(e,t){var n=t.detail,r={message:"cells-bridge::"+e,properties:{}},i=o({},n,r);switch(e){case E:var a=t.page,s=t.components;i.properties={page:a,components:s};break;case w:var u=t.name,c=t.params,l=t.pattern;i.properties={route:u,params:c,pattern:l};break;case k:var h=t.event,f=t.detail,p=f.page,d=h.detail;i.properties={page:p,params:d};break;case R:var v=t.params,y=t.url;i.properties={params:v,url:y};break;case j:i.properties=o({},t);break;case U:var b=t.detail,g=t.event,m=b.message,_=b.properties,F=g.detail;i.message=m,i.properties=this.unflattenData(_,F);break;case O:case P:case S:case T:case C:case x:case A:case I:case N:case M:case L:case D:console.log(e+" - "+t)}return i}},{key:"isBridgeLoggableEvent",value:function(e){var t=[E,w,k,R,j];return t.includes(e)}},{key:"unflattenData",value:function(e,t){var n={};return Object.keys(e).forEach(function(r){var i=e[r],o=null;if(i instanceof Object){var a=i.bind;o=p(t,a)}else o=i;d(n,r,o)}),n}}]),e}();t.default=F},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e),this.navStack=[],this.skipNav={}}return i(e,[{key:"addSkipNavigation",value:function(e){e.skipHistory!==!0&&e.skipHistory!==!1||(this.skipNav[e.from+":"+e.to]=e.skipHistory)}},{key:"_reverseNavigation",value:function(e){return{from:e.to,to:e.from}}},{key:"isSkipNavigation",value:function(e){return this.skipNav[e.from+":"+e.to]===!0}},{key:"lastNavigation",value:function(){var e=this.navStack.length,t=void 0,n=void 0;return 1===e?n=this.navStack[0]:e>1&&(n=this.navStack[e-1],t=this.navStack[e-2]),this.createNavigation(t,n)}},{key:"createRoute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{page:e,params:t}}},{key:"createNavigation",value:function(e,t){return{from:e?e.page:void 0,to:t?t.page:void 0}}},{key:"push",value:function(e){this.top()&&this.top().page===e.page||this.navStack.push(e)}},{key:"pop",value:function(){return this.navStack.pop()}},{key:"top",value:function(){return this.navStack.length>0?this.navStack[this.navStack.length-1]:void 0}},{key:"isBackwardNavigation",value:function(e){var t=this.lastNavigation();return t&&e.from===t.to&&e.to===t.from}},{key:"update",value:function(e,t){var n=this.createNavigation(e,t);if(this.isBackwardNavigation(n)){for(;this.isSkipNavigation(this._reverseNavigation(this.lastNavigation()));)this.pop();this.pop()}else this.push(t);return this.top()}},{key:"clear",value:function(){this.navStack=[]}},{key:"replaceRoute",value:function(e){this.navStack.length>0?this.navStack[this.navStack.length-1]=e:this.push(e)}},{key:"length",get:function(){return this.navStack.length}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n){r(this,e),this.name="",this.pattern="",this.regexp=null,this.redirectPage=null,this.isAccessible=!0,this.name=t,this.pattern=n;var i=n.replace(e.PARAM,"([^/]+)").replace(e.TRAILING_SLASHES,"/*");this.regexp=new RegExp("^"+i+"$");for(var o,a=[];null!==(o=e.PARAM.exec(n));)a.push(o[1]);this.keys=a}return i(e,[{key:"path",value:function t(n){n=n||{},this.params={};for(var r,t=this.pattern;null!==(r=e.PARAM.exec(this.pattern));)t=t.replace(r[0],n[r[1]]),this.params[r[1]]=n[r[1]];var i=[];for(var o in n)this.params.hasOwnProperty(o)||i.push(o+"="+encodeURIComponent(n[o]));return i.length&&(t+="?"+i.join("&")),t}},{key:"matchPath",value:function(e){return e.match(this.regexp)}},{key:"parsePath",value:function(t){var n=this.matchPath(t);if(this.params={},n)for(var r,i=1;null!==(r=e.PARAM.exec(this.pattern));)this.params[r[1]]=this._parseParam(n[i]),i++}},{key:"parseQuery",value:function(e){this.query=e;for(var t in this.query)this.params[t]=this.query[t]}},{key:"is404",value:function(){return this.name===e._404_PAGE_NAME}},{key:"_isNumber",value:function(e){return parseInt(e)+""===e||parseFloat(e)+""===e}},{key:"_parseParam",value:function(e){return this._isNumber(e)&&(e=+e),e}},{key:"handler",value:function(){}}]),e}();o.PARAM=/(?::([^\/]+))/g,o.TRAILING_SLASHES=/\/*$/,o._404_PAGE_NAME="404",t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(44),h=r(l),f=n(4),p=n(0);n(10),n(61),n(62),n(64),n(65);var d=n(2),v=r(d),y=n(43),b=r(y),g=n(1),m=r(g),_=f.Subscription.EMPTY,E=m.default.externalEventsCodes,w=null,O=!1,k={},P=void 0,S=void 0,T=void 0,C=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._currentSubscription=_,e}return a(t,e),u(t,[{key:"add",value:function(e){this.closed||("function"==typeof e&&(e=new f.Subscription(e)),this._currentSubscription&&(this.remove(this._currentSubscription),this._currentSubscription.unsubscribe(),this._currentSubscription=null),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,this._currentSubscription=e))}}]),t}(f.Subscription),x=function(){function e(){var t=this;i(this,e);var n=E.TEMPLATE_TRANSITION_END;return w||(w=this),this.navigationStack=this._createNavigationStack(),v.default.on(n,function(){t.isNavigationInProgress=!1}),w}return u(e,[{key:"_createNavigationStack",value:function(){return new b.default}},{key:"handler",value:function(e){}},{key:"addRoute",value:function(e,t){return this.routes[e]=new h.default(e,t),this.routes[e]}},{key:"addRoutes",value:function(e){var t={};for(var n in e)t[n]=this.addRoute(n,e[n]);return t}},{key:"addSkipNavigations",value:function(e){for(var t=0;t<e.length;t++)this.navigationStack.addSkipNavigation(e[t])}},{key:"_getHashPath",value:function(){return location.hash.replace(e.HASH_PREFIX,"/").replace(e.EMPTY,"/")}},{key:"_observeHashChange",value:function(){return p.Observable.fromEvent(window,"hashchange").map(this._getHashPath).startWith(this._getHashPath())}},{key:"_getURLPath",value:function(){return location.pathname.replace(e.PATH_PREFIX,"/")}},{key:"_observeStateChange",value:function(){return p.Observable.merge(p.Observable.fromEvent(window,"popstate"),p.Observable.fromEvent(window,"pushstate")).map(this._getURLPath).startWith(this._getURLPath())}},{key:"matchRoute",value:function(e){var t,n=e.split("?"),r=s(n,2),i=r[0],o=r[1];o=this._parseQuery(o);for(var a in this.routes)if(t=this.routes[a],(!t.is404()||t.isAccessible)&&t.matchPath(i))return t.parsePath(i),t.parseQuery(o),t}},{key:"_parseQuery",value:function(e){var t={};if(e){var n=e.split("&");if(n){var r=void 0,i=void 0,o=void 0,a=n.length;for(o=0;o<a;o++){var u=n[o].split("="),c=s(u,2);r=c[0],i=c[1],t[r]=decodeURIComponent(i)}}}return t}},{key:"_setup404",value:function(){var e=this.routes[h.default._404_PAGE_NAME];if(e&&""!==e.pattern){var t=this.getRouteWithPattern(e.pattern);e.redirectPage=t?t.name:e.name,e.isAccessible=!t}return e}},{key:"getRouteWithPattern",value:function(e){for(var t in this.routes){var n=this.routes[t];if(!n.is404()&&n.pattern===e)return n}return null}},{key:"start",value:function(){var e=this;if(!P){var t=new C;T=this._setup404();var n=this.useHistory?this._observeStateChange():this._observeHashChange(),r=n.distinctUntilChanged().map(this.matchRoute.bind(this)).forEach(function(n){if(n){var r=e.currentRoute?e.currentRoute.name:void 0,i=e.navigationStack.createRoute(r),o=e.navigationStack.createRoute(n.name),a=e.navigationStack.update(i,o).page;if(a!==o.page)return void e.go(a,void 0,!1);S=n;var s=new f.Subscription(function(){return e.currentRoute});t.add(s),e.currentRoute.handler(),e.handler(e.currentRoute)}else T&&T.redirectPage&&e.goReplacing(T.redirectPage)});P=new f.Subscription(r,t)}return P}},{key:"stop",value:function(){P&&(P.unsubscribe(),P=null),this.isNavigationInProgress=!1}},{key:"destroy",value:function(){this.stop(),this.routes={}}},{key:"getPath",value:function(e,t){var n=this.routes[e];return n?n.path(t):void console.error("Wrong route name: %s, valid route names: %s",e,Object.keys(this.routes).join(", "))}},{key:"newNavigation",value:function(e){return{from:this.currentRoute?this.currentRoute.name:void 0,to:e}}},{key:"reverseNavigation",value:function(e){return{from:e.to,to:e.from}}},{key:"go",value:function(t,n,r,i){if(!this.isNavigationInProgress){if(void 0!==i){var o=this.newNavigation(t),a=this.reverseNavigation(o);a.skipHistory=i,this.navigationStack.addSkipNavigation(a)}var s=t.replace(e.LTRIM_SLASH,""),u=this.getPath(s,n);u!==this._getHashPath()&&(this.isNavigationInProgress=!0,this.updatePathInBrowser(u,r))}}},{key:"back",value:function(){var e={};if(this.navigationStack.length>1){var t=this.navigationStack.pop(),n=t,r=this.getLastRoute();for(console.log("back::",t,r);this.navigationStack.isSkipNavigation({from:n.page,to:r.page})&&this.navigationStack.length>1;)n=this.navigationStack.pop(),this.navigationStack.length>0&&(r=this.getLastRoute());var i=r.page,o=r.params;e.from=t,e.to=r,this.go(i,o)}else e.from=this.getLastRoute(),e.to=this.getLastRoute();return e}},{key:"updatePathInBrowser",value:function(e,t){this.useHistory?t?this.historyReplaceState(e):this.historyPushState(e):t?this.locationReplace(e):this.locationHash(e)}},{key:"goReplacing",value:function(e,t){this.go(e,t,!0)}},{key:"historyReplaceState",value:function(e){history.replaceState(null,null,e)}},{key:"historyPushState",value:function(e){history.pushState(null,null,e)}},{key:"locationReplace",value:function(e){location.replace("#!"+e)}},{key:"locationHash",value:function(e){location.hash="#!"+e}},{key:"getLastRoute",value:function(){return this.navigationStack.top()}},{key:"init",value:function(){S=void 0,this._clearStack()}},{key:"_clearStack",value:function(){this.navigationStack.clear()}},{key:"useHistory",set:function(t){e.SUPPORTS_HISTORY_API&&(O=t)},get:function(){return O}},{key:"routes",set:function(e){k=e},get:function(){return k}},{key:"currentRoute",get:function(){return S},set:function(e){S=e}}]),e}();x.SUPPORTS_HISTORY_API=window.history&&"pushState"in window.history,x.PARAM=/(?::([^\/]+))/g,x.LTRIM_SLASH=/^\/(\b)/,x.EMPTY=/^$/,x.HASH_PREFIX=/^#!?\/*/,x.PATH_PREFIX=/^\/*/,x.isNavigationInProgress=!1,t.default=x},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}var o=n(34),a=i(o),s=n(1),u=r(s),c={native:{windowExport:"CellsNativeBridge",library:"cellsNative",file:"cells-native-bridge",version:"0.10.5"},polymer:{windowExport:"CellsPolymerBridge",library:"cellsPolymer",file:"cells-polymer-bridge",version:"3.4.5"},core:{windowExport:"CellsBridge",library:"cells",file:"cells-bridge",version:"1.0.0"}}.polymer||{native:{windowExport:"CellsNativeBridge",library:"cellsNative",file:"cells-native-bridge",version:"0.10.5"},polymer:{windowExport:"CellsPolymerBridge",library:"cellsPolymer",file:"cells-polymer-bridge",version:"3.4.5"},core:{windowExport:"CellsBridge",library:"cells",file:"cells-bridge",version:"1.0.0"}}.core,l=c.windowExport;window[l]=a.default,e.exports={metadata:u}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(19),h=r(l),f=function(e){var t;return Polymer.Base._EVENT_CHANGED||(Polymer.Base._EVENT_CHANGED="-changed"),e.indexOf(Polymer.Base._EVENT_CHANGED,e.length-Polymer.Base._EVENT_CHANGED.length)!==-1&&(t=e.slice(0,-Polymer.Base._EVENT_CHANGED.length),t=Polymer.CaseMap.dashToCamelCase(t)),t},p=function(e,t,n){var r,i,o=f(e.type);return o&&e.detail&&e.detail.hasOwnProperty("value")?(i=e.detail.value,t=t||o,r=e.detail.path?e.detail.path.replace(o,t):t):(r=t,i=e.detail),void 0!==n&&void 0===n.is&&"object"===("undefined"==typeof i?"undefined":c(i))&&(void 0===Polymer.Element?i=JSON.stringify(i):n instanceof Polymer.Element==!1&&(i=JSON.stringify(i))),{path:r,value:i,property:t}},d=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"wrapCallback",value:function(e,t){return function(n){var r=function(e){setTimeout(function(){"requestIdleCallback"in window?window.requestIdleCallback(e):setTimeout(e,1)},100)},i=function(o,a){this._isPolymerElement(e)?("function"==typeof t?this._dispatchActionFunction(n,e,t):"function"==typeof e[t]?this._dispatchActionFunction(n,e,t):this._dispatchActionProperty(n,e,t),a&&a.disconnect()):r(i)}.bind(this);if(this._isPolymerElement(e))i();else{var o=new MutationObserver(i),a={attributes:!1,childList:!0,characterData:!0};o.observe(e,a),r(i,100)}}.bind(this)}},{key:"_whichPolymerVersion",value:function(e){var t=-1;return void 0!==Polymer.Element&&(e instanceof Polymer.Element||e instanceof Polymer.LegacyElementMixin)?t=2:void 0!==e.__isPolymerInstance__&&(t=1),t}},{key:"_isPolymerElement",value:function(e){return this._whichPolymerVersion(e)>0}},{key:"_isEventAtTarget",value:function(e){var n;if(Polymer.Settings.hasShadow===!1||Polymer.Settings.useShadow===!1){var r=Polymer.dom(e);n=r.localTarget===e.currentTarget}else n=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_isEventAtTarget",this).call(this,e);return n}},{key:"_dispatchActionFunction",value:function(e,t,n){var r,i=f(e.type);r=i&&e.detail&&e.detail.hasOwnProperty("value")?Polymer.dom(e).rootTarget?Polymer.dom(e).rootTarget[i]:e.detail.value:e.detail,this.bridge&&this.bridge.debug&&this.bridge.parsePayload&&(""+t[n]).indexOf(".data")>-1&&(r=this.bridge.parsePayload(e.detail),console.warn("%c"+t.tagName+"%c is using an incompatible payload data in "+n,"background: #ff9800; color: white; padding: 4px 4px 4px 10px","background: #ff9800; color: rgba(255,255,255,0.9); padding: 4px 10px 4px 0")),"function"==typeof n?n(r):t[n](r)}},{key:"_getTargetProperties",value:function(e){var t=void 0;return e.constructor.config?t=e.constructor.config.properties:e.constructor._properties&&(t=e.constructor._properties),t}},{key:"_dispatchActionProperty",value:function(e,t,n){var r,i=p(e,n,t);return(t&&t.getPropertyInfo||void 0!==Polymer.Element&&t instanceof Polymer.Element==!1)&&(r=t.getPropertyInfo?t.getPropertyInfo(i.property):this._getTargetProperties(t)[i.property],r&&r.defined&&!r.readOnly&&!r.computed)?t.set(i.path,i.value):(t&&void 0===t.getPropertyInfo||void 0!==Polymer.Element&&t instanceof Polymer.Element==!1)&&(r=void 0!==this._getTargetProperties(t)?this._getTargetProperties(t)[i.property]:void 0,r&&!r.readOnly&&!r.computed)?t.set(i.path,i.value):"boolean"!=typeof i.value||i.value?t.setAttribute(i.path,i.value):t.removeAttribute(i.path)}},{key:"register",value:function(e,n){if(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"register",this).call(this,e,n),e&&n&&!e.__isCellsConnected){if(n.in)for(var r in n.in)this.manager.get(r)._events[0]&&(n.ignoreAttr?n.ignoreAttr.push(n.in[r].bind):n.ignoreAttr=[n.in[r].bind]);if(n.out)for(var i in n.out){var o=f(n.out[i].bind),a=this._whichPolymerVersion(e);if(2===a){if(o&&e.__data&&!this.manager.get(i)._events[0]&&e&&e._hasReadOnlyEffect&&!e._hasReadOnlyEffect(o)&&!e._hasComputedEffect(o)){var s=e[o];e.__data[o]=void 0,e[o]=s}}else if(o&&e.__data__&&!this.manager.get(i)._events[0]&&e&&e.getPropertyInfo){var c=e.getPropertyInfo(o);if(c.defined&&!c.readOnly&&!c.computed){var l=e[o];e.__data__[o]=void 0,e[o]=l}}}e.__isCellsConnected=!0}}}]),t}(h.default);t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(9),c=r(u),l=n(25),h=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"isUnresolved",value:function(){return(0,l.isPolymerElementUnresolved)(this.node)}}]),t}(c.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(21),c=r(u),l=n(50),h=r(l),f=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"_createCellsTemplate",value:function(e,t){var n=new h.default(t),r=this._createCellsTemplateConfig(e);return n.config(r),n}},{key:"_createCellsTemplateConfig",value:function(e){return{name:e,template:{id:this.parseTemplateId(e),name:this.parseTemplateName(e)}}}}]),t}(c.default);t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(23),c=r(u),l=n(25),h=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"isUnresolved",value:function(){return(0,l.isPolymerElementUnresolved)(this.node)}}]),t}(c.default);t.default=h},function(e,t,n){(function(e){!function(t,n){e.exports=n()}(this,function(){"use strict";function t(e){var t=this;
return function(){var n=a(regeneratorRuntime.mark(function n(r){var i,o,a,s,u,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=r.url,o=r.body,a=r.headers,s={method:e,body:JSON.stringify(o),headers:{"content-type":"application/json"}},a&&Object.keys(a).forEach(function(e){var t=a[e];s.headers[e]=t}),t.next=5,fetch(i,s);case 5:if(u=t.sent,u.ok){t.next=8;break}return t.abrupt("return",null);case 8:return c={},t.prev=9,t.next=12,u.json();case 12:c=t.sent,t.next=17;break;case 15:t.prev=15,t.t0=t.catch(9);case 17:return t.abrupt("return",c);case 18:case"end":return t.stop()}},n,t,[[9,15]])}));return function(e){return n.apply(this,arguments)}}()}function n(e){return function(t,n,i){return{configurable:!0,enumerable:i.enumerable,get:function(){return Object.defineProperty(this,n,{configurable:!0,enumerable:i.enumerable,value:r(i.value,e)}),this[n]}}}}function r(e){function t(){for(var i=this,o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];t.clear(),r=setTimeout(function(){r=null,e.apply(i,a)},n)}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F,r=void 0;return t.clear=function(){r&&(clearTimeout(r),r=null)},t}function i(e,t,n,r,i){var o={};return Object.keys(r).forEach(function(e){o[e]=r[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}},s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)};!function(t){function n(e,t,n,r){var o=t&&t.prototype instanceof i?t:i,a=Object.create(o.prototype),s=new d(r||[]);return a._invoke=l(e,n,s),a}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function i(){}function a(){}function s(){}function u(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function c(e){function t(n,i,a,s){var u=r(e[n],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"===("undefined"==typeof l?"undefined":o(l))&&m.call(l,"__await")?Promise.resolve(l.__await).then(function(e){t("next",e,a,s)},function(e){t("throw",e,a,s)}):Promise.resolve(l).then(function(e){c.value=e,a(c)},s)}s(u.arg)}function n(e,n){function r(){return new Promise(function(r,i){t(e,n,r,i)})}return i=i?i.then(r,r):r()}var i;this._invoke=n}function l(e,t,n){var i=S;return function(o,a){if(i===C)throw new Error("Generator is already running");if(i===x){if("throw"===o)throw a;return y()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=h(s,n);if(u){if(u===A)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===S)throw i=x,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=C;var c=r(e,t,n);if("normal"===c.type){if(i=n.done?x:T,c.arg===A)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=x,n.method="throw",n.arg=c.arg)}}}function h(e,t){var n=e.iterator[t.method];if(n===b){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=b,h(e,t),"throw"===t.method))return A;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,A;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=b),t.delegate=null,A):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,A)}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function p(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function d(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function v(e){if(e){var t=e[E];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(m.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=b,t.done=!0,t};return r.next=r}}return{next:y}}function y(){return{value:b,done:!0}}var b,g=Object.prototype,m=g.hasOwnProperty,_="function"==typeof Symbol?Symbol:{},E=_.iterator||"@@iterator",w=_.asyncIterator||"@@asyncIterator",O=_.toStringTag||"@@toStringTag",k="object"===o(e),P=t.regeneratorRuntime;if(P)return void(k&&(e.exports=P));P=t.regeneratorRuntime=k?e.exports:{},P.wrap=n;var S="suspendedStart",T="suspendedYield",C="executing",x="completed",A={},R={};R[E]=function(){return this};var j=Object.getPrototypeOf,I=j&&j(j(v([])));I&&I!==g&&m.call(I,E)&&(R=I);var N=s.prototype=i.prototype=Object.create(R);a.prototype=N.constructor=s,s.constructor=a,s[O]=a.displayName="GeneratorFunction",P.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===a||"GeneratorFunction"===(t.displayName||t.name))},P.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,O in e||(e[O]="GeneratorFunction")),e.prototype=Object.create(N),e},P.awrap=function(e){return{__await:e}},u(c.prototype),c.prototype[w]=function(){return this},P.AsyncIterator=c,P.async=function(e,t,r,i){var o=new c(n(e,t,r,i));return P.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},u(N),N[O]="Generator",N[E]=function(){return this},N.toString=function(){return"[object Generator]"},P.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},P.values=v,d.prototype={constructor:d,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=b,this.done=!1,this.delegate=null,this.method="next",this.arg=b,this.tryEntries.forEach(p),!e)for(var t in this)"t"===t.charAt(0)&&m.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=b)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=b),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=m.call(i,"catchLoc"),s=m.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,A):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),A},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),p(n),A}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;p(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:v(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=b),A}}}(function(){return this}()||Function("return this")());var h,f,p=["consumerId","policy","mrId","nameSpace","environment"],d={DEFAULT_ADAPTER_IDENTIFIER:"application",REQUIRED_FIELDS:p,ALLOWED_FIELDS:[].concat(p,["identifier"])},v={HOST:function(e){return"https://rho."+e+".es.platform.bbva.com/v1"},ALLOWED_FIELDS:["mrId","spanId","startDate","finishDate","name","parentSpan","traceId","properties","duration","recordDate"],REQUIRED_FIELDS:[]},y={HOST:function(e){return"https://omega."+e+".es.platform.bbva.com/v1"},DEFAULT_LOG_LEVEL:"DEBUG",ALLOWED_FIELDS:["mrId","spanId","traceId","creationDate","level","message","properties"],MAXIMUM_BULK_SIZE:1e3,REQUIRED_FIELDS:[]},b={HOST:function(e){return"https://tsec2jwt."+e+".global.platform.bbva.com/v1/Token"}},g={SEMAAS:d,RHO:v,OMEGA:y,TSEC2JWT:b},m=function(e,t){var n=c({},e);return Object.keys(n).forEach(function(e){t.includes(e)||delete n[e]}),n.properties&&Object.keys(n.properties).forEach(function(e){var t=n.properties[e];"object"===("undefined"==typeof t?"undefined":o(t))&&(n.properties[e]=JSON.stringify(t))}),n},_=function(e){return function(t){return Object.prototype.hasOwnProperty.call(e,t)&&!!e[t]}},E=function(e,t){return t.every(_(e))},w=function(e,t){return e.reduce(function(e,n){var r=t instanceof Function?t(n):n[t],i=e.find(function(e){return e&&e.key===r});return i?i.values.push(n):e.push({key:r,values:[n]}),e},[])},O=function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var r=e.join("");return r},k={sanitizeObj:m,hasProperty:_,hasProperties:E,groupBy:w,createUUID:O},P=g.OMEGA,S=P.DEFAULT_LOG_LEVEL,T=P.ALLOWED_FIELDS,C=k.sanitizeObj,x=function(){function e(t){s(this,e),this.mrId=null,this.mrId=t}return u(e,[{key:"createLog",value:function(e){var t=this.mrId,n=C(e,T),r={mrId:t,creationDate:1e6*Date.now(),level:S};return c({},r,n)}}]),e}(),A=g.RHO,R=A.ALLOWED_FIELDS,j=k.sanitizeObj,I=k.createUUID,N=function(){function e(t){s(this,e),this.spanId=null,this.initialize(t)}return u(e,[{key:"initialize",value:function(e){var t=this;R.forEach(function(n){e[n]&&(t[n]=e[n])}),this.spanId=I(),this.start()}},{key:"start",value:function(){this.startDate=1e6*Date.now()}},{key:"finish",value:function(){this.finishDate=1e6*Date.now()}}]),e}(),M=function(){function e(t){s(this,e),this.mrId=null,this.mrId=t}return u(e,[{key:"createUUID",value:function(){return I()}},{key:"createSpan",value:function(e,t){var n=this.mrId,r=e.mrId,i=void 0===r?n:r,o=e.parentSpan,a=this.getParentSpan(o,i,t),s=c({},e,{mrId:i,parentSpan:a}),u=new N(s);return u}},{key:"buildSpans",value:function(e){var t=Array.isArray(e)?[].concat(l(e)):[e];return t.map(function(e){return j(e,R)})}},{key:"getParentSpan",value:function(e,t,n){return e?[n,t,"spans",e].join("/"):null}}]),e}(),L={Omega:x,Rho:M},D={GET:t("get"),POST:t("post")},U=function(){function e(){s(this,e)}return u(e,null,[{key:"get",value:function(){function e(e,n){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D.GET({url:t,headers:n}));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"post",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D.POST({url:t,body:n,headers:r}));case 1:case"end":return e.stop()}},e,this)}));return e}()}]),e}(),F=500,B=function(e){return function(t,n,r){var i=r.value;return e.slice().reverse().forEach(function(e){return i=e(i)}),c({},r,{value:i})}},H={outerDecorator:n,decorate:B},G=k.groupBy,V=1e3,z=function(){function e(t){s(this,e),this.items=[],this.identifier=null,this.identifier=t}return u(e,[{key:"add",value:function(e,t){var n=this,r=Array.isArray(t)?[].concat(l(t)):[t];r.forEach(function(t){var r={data:t,endpoint:e};n.items.push(r)})}},{key:"dump",value:function(){if(!this.any())return null;var e=G(this.items,"endpoint"),t=e[0].values,n=t.slice(0,V),r=this.items.filter(function(e){return!n.includes(e)});return console.log("Dumping "+n.length+" items from "+this.identifier+" queue ("+this.items.length+")..."),this.items=r,n}},{key:"any",value:function(){return null!==this.items&&this.items.length>0}}]),e}(),q=L.Omega,W=L.Rho,Y=g.SEMAAS,K=Y.REQUIRED_FIELDS,Q=Y.ALLOWED_FIELDS,$=Y.DEFAULT_ADAPTER_IDENTIFIER,J=g.OMEGA.HOST,X=g.RHO.HOST,Z=g.TSEC2JWT.HOST,ee=k.hasProperties,te=H.outerDecorator,ne=(h=te(5e3),f=function(){function e(t){s(this,e),this.nameSpace=null,this.identifier=$,this.mrId=null,this.consumerId=null,this.policy=null,this.environment=null,this.apiKey=null,this.omega=null,this.rho=null,this.queue=null,this.setup(t)}return u(e,[{key:"setup",value:function(e){if(!e||!this.validateConfig(e,K))throw new Error("Invalid setup for SEMaaS adapter ("+this.identifier+"). Required fields: "+K.join(", ")+".");this.initialize(e)}},{key:"validateConfig",value:function(e,t){return ee(e,t)}},{key:"initialize",value:function(e){var t=this;Q.forEach(function(n){e[n]&&(t[n]=e[n])});var n=this.nameSpace,r=this.identifier,i=this.mrId,o=this.environment;this.omega=new q(i),this.rho=new W(i),this.queue=new z(r),console.info("SEMaaS adapter for "+o+" ("+r+" - ns: "+n+", mrId: "+i+") successfully initialized.")}},{key:"log",value:function(e){var t=this.omega.createLog(e);this.enqueue(this.omegaEndpoint,t)}},{key:"ingest",value:function(e){var t=this.rho.buildSpans(e);this.enqueue(this.rhoEndpoint,t)}},{key:"createSpan",value:function(e){var t=this.rho.createSpan(e,this.prefixForChildSpan);return t}},{key:"createUUID",value:function(){var e=this.rho.createUUID();return e}},{key:"send",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(t,n,r){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=void 0,e.prev=1,e.next=4,U.post(t,n,r);case 4:i=e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:return i||(console.log("There was a problem while sending data to SEMaaS - operation will be queued."),this.enqueue(t,n)),e.abrupt("return",i);case 11:case"end":return e.stop()}},e,this,[[1,7]])}));return e}()},{key:"enqueue",value:function(e,t){this.queue.add(e,t),this.flush()}},{key:"flush",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureValidApiKey();case 2:if(t=e.sent){e.next=6;break}return console.log("No valid API Key for SEMaaS adapter ("+this.identifier+") - aborting operation"),e.abrupt("return");case 6:if(n=this.queue.dump()){e.next=10;break}return console.log("Empty queue for SEMaaS adapter ("+this.identifier+")"),e.abrupt("return");case 10:r=n[0].endpoint,i=this.apiKey,console.log("Sending queued batch "+r+" - "+i),o=n.map(function(e){return e.data}),a={"Api-Key":"jwt "+i},this.send(r,o,a).then(function(){return s.queue.any()&&s.flush()});case 16:case"end":return e.stop()}},e,this)}));return e}()},{key:"ensureValidApiKey",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasApiKey){e.next=5;break}return console.log("ApiKey OK -> next()"),e.abrupt("return",!0);case 5:if(!this.hasCredentials){e.next=8;break}return console.log("ApiKey KO, Credentials OK -> getApiKey()"),e.abrupt("return",this.getApiKey());case 8:return console.log("No ApiKey && No Credentials -> KO"),e.abrupt("return",!1);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"getApiKey",value:function(){function e(){return t.apply(this,arguments)}var t=a(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.consumerId,n=this.policy,r=this.environment,i={"x-consumer-id":t,"x-tsec-token":window.sessionStorage.getItem("tsec"),"x-validation-policy":n},o=Z(r),e.next=5,U.get(o,i);case 5:if(a=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return s=a.accessToken,this.apiKey=s,e.abrupt("return",s);case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"getEnvironmentEndpoint",value:function(e){var t=this.environment;return e(t)}},{key:"hasApiKey",get:function(){return!!this.apiKey}},{key:"hasCredentials",get:function(){return!!this.consumerId&&!!this.policy&&!!this.tsec}},{key:"initialized",get:function(){return!!this.omega&&!!this.rho}},{key:"omegaEndpoint",get:function(){var e=this.nameSpace,t=this.getEnvironmentEndpoint(J);return t+"/ns/"+e+"/logs"}},{key:"rhoEndpoint",get:function(){var e=(this.nameSpace,this.getEnvironmentEndpoint(X));return e+"/ns/"+this.nameSpace+"/spans"}},{key:"prefixForChildSpan",get:function(){return"ns/"+this.nameSpace+"/mrs"}},{key:"tsec",get:function(){return window.sessionStorage.getItem("tsec")}}]),e}(),i(f.prototype,"flush",[h],Object.getOwnPropertyDescriptor(f.prototype,"flush"),f.prototype),f);return ne})}).call(t,n(100)(e))},function(e,t,n){"use strict";function r(e){const t=e.split("."),n=[];for(let r=0;r<t.length;r++){let e=t[r];for(;"\\"===e[e.length-1]&&void 0!==t[r+1];)e=e.slice(0,-1)+".",e+=t[++r];n.push(e)}return n}const i=n(54);e.exports={get(e,t,n){if(!i(e)||"string"!=typeof t)return void 0===n?e:n;const o=r(t);for(let a=0;a<o.length;a++){if(!Object.prototype.propertyIsEnumerable.call(e,o[a]))return n;if(e=e[o[a]],void 0===e||null===e){if(a!==o.length-1)return n;break}}return e},set(e,t,n){if(!i(e)||"string"!=typeof t)return e;const o=e,a=r(t);for(let s=0;s<a.length;s++){const t=a[s];i(e[t])||(e[t]={}),s===a.length-1&&(e[t]=n),e=e[t]}return o},delete(e,t){if(i(e)&&"string"==typeof t){const n=r(t);for(let o=0;o<n.length;o++){const t=n[o];if(o===n.length-1)return void delete e[t];if(e=e[t],!i(e))return}}},has(e,t){if(!i(e)||"string"!=typeof t)return!1;const n=r(t);for(let o=0;o<n.length;o++){if(!i(e))return!1;if(!(n[o]in e))return!1;e=e[n[o]]}return!0}}},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,s,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(n=this._events[e],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),c=n.slice(),i=c.length,u=0;u<i;u++)c[u].apply(this,s);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,a,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){"use strict";e.exports=function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(3),o=function(e){function t(t,n,r){e.call(this),this.parent=t,this.outerValue=n,this.outerIndex=r,this.index=0}return r(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(i.Subscriber);t.InnerSubscriber=o},function(e,t,n){"use strict";var r=n(0),i=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){var r=this.kind;switch(r){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return r.Observable.of(this.value);case"E":return r.Observable.throw(this.error);case"C":return r.Observable.empty()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return"undefined"!=typeof t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();t.Notification=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(3),o=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(i.Subscriber);t.OuterSubscriber=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(60),o=n(91),a=n(4),s=n(29),u=n(16),c=n(27),l=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY),e.call(this),this.scheduler=r,this._events=[],this._bufferSize=t<1?1:t,this._windowTime=n<1?1:n}return r(t,e),t.prototype.next=function(t){var n=this._getNow();this._events.push(new h(n,t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._trimBufferThenGetEvents(),r=this.scheduler;if(this.closed)throw new u.ObjectUnsubscribedError;this.hasError?t=a.Subscription.EMPTY:this.isStopped?t=a.Subscription.EMPTY:(this.observers.push(e),t=new c.SubjectSubscription(this,e)),r&&e.add(e=new s.ObserveOnSubscriber(e,r));for(var i=n.length,o=0;o<i&&!e.closed;o++)e.next(n[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||o.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&r.splice(0,o),r},t}(i.Subject);t.ReplaySubject=l;var h=function(){function e(e,t){this.time=e,this.value=t}return e}()},function(e,t,n){"use strict";var r=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=Date.now?Date.now:function(){return+new Date},e}();t.Scheduler=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(0),o=n(3),a=n(4),s=n(16),u=n(27),c=n(15),l=function(e){function t(t){e.call(this,t),this.destination=t}return r(t,e),t}(o.Subscriber);t.SubjectSubscriber=l;var h=function(e){function t(){e.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return r(t,e),t.prototype[c.rxSubscriber]=function(){return new l(this)},t.prototype.lift=function(e){var t=new f(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new s.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new s.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),a.Subscription.EMPTY):this.isStopped?(e.complete(),a.Subscription.EMPTY):(this.observers.push(e),new u.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new i.Observable;return e.source=this,e},t.create=function(e,t){return new f(e,t)},t}(i.Observable);t.Subject=h;var f=function(e){function t(t,n){e.call(this),this.destination=t,this.source=n}return r(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){var t=this.source;return t?this.source.subscribe(e):a.Subscription.EMPTY},t}(h);t.AnonymousSubject=f},function(e,t,n){"use strict";var r=n(0),i=n(74);r.Observable.merge=i.merge},function(e,t,n){"use strict";var r=n(0),i=n(76);r.Observable.prototype.distinctUntilChanged=i.distinctUntilChanged},function(e,t,n){"use strict";var r=n(0),i=n(77);r.Observable.prototype.first=i.first},function(e,t,n){"use strict";var r=n(0),i=n(78);r.Observable.prototype.map=i.map},function(e,t,n){"use strict";var r=n(0),i=n(79);r.Observable.prototype.startWith=i.startWith},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(0),o=n(12),a=n(11),s=function(e){function t(t,n){e.call(this),this.arrayLike=t,this.scheduler=n,n||1!==t.length||(this._isScalar=!0,this.value=t[0])}return r(t,e),t.create=function(e,n){var r=e.length;return 0===r?new a.EmptyObservable:1===r?new o.ScalarObservable(e[0],n):new t(e,n)},t.dispatch=function(e){var t=e.arrayLike,n=e.index,r=e.length,i=e.subscriber;if(!i.closed){if(n>=r)return void i.complete();i.next(t[n]),e.index=n+1,this.schedule(e)}},t.prototype._subscribe=function(e){var n=0,r=this,i=r.arrayLike,o=r.scheduler,a=i.length;if(o)return o.schedule(t.dispatch,0,{arrayLike:i,index:n,length:a,subscriber:e});for(var s=0;s<a&&!e.closed;s++)e.next(i[s]);e.complete()},t}(i.Observable);t.ArrayLikeObservable=s},function(e,t,n){"use strict";function r(e){return!!e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}function i(e){return!!e&&"function"==typeof e.on&&"function"==typeof e.off}function o(e){return!!e&&"[object NodeList]"===d.call(e)}function a(e){return!!e&&"[object HTMLCollection]"===d.call(e)}function s(e){return!!e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}var u=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},c=n(0),l=n(18),h=n(17),f=n(7),p=n(4),d=Object.prototype.toString,v=function(e){function t(t,n,r,i){e.call(this),this.sourceObj=t,this.eventName=n,this.selector=r,this.options=i}return u(t,e),t.create=function(e,n,r,i){return h.isFunction(r)&&(i=r,r=void 0),new t(e,n,i,r)},t.setupSubscription=function(e,n,u,c,l){var h;if(o(e)||a(e))for(var f=0,d=e.length;f<d;f++)t.setupSubscription(e[f],n,u,c,l);else if(s(e)){var v=e;e.addEventListener(n,u,l),h=function(){return v.removeEventListener(n,u)}}else if(i(e)){var y=e;e.on(n,u),h=function(){return y.off(n,u)}}else{if(!r(e))throw new TypeError("Invalid event target");
var b=e;e.addListener(n,u),h=function(){return b.removeListener(n,u)}}c.add(new p.Subscription(h))},t.prototype._subscribe=function(e){var n=this.sourceObj,r=this.eventName,i=this.options,o=this.selector,a=o?function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var r=l.tryCatch(o).apply(void 0,t);r===f.errorObject?e.error(f.errorObject.e):e.next(r)}:function(t){return e.next(t)};t.setupSubscription(n,r,a,e,i)},t}(c.Observable);t.FromEventObservable=v},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(30),o=n(31),a=n(33),s=n(70),u=n(69),c=n(6),l=n(66),h=n(13),f=n(0),p=n(29),d=n(14),v=function(e){function t(t,n){e.call(this,null),this.ish=t,this.scheduler=n}return r(t,e),t.create=function(e,n){if(null!=e){if("function"==typeof e[d.observable])return e instanceof f.Observable&&!n?e:new t(e,n);if(i.isArray(e))return new c.ArrayObservable(e,n);if(a.isPromise(e))return new s.PromiseObservable(e,n);if("function"==typeof e[h.iterator]||"string"==typeof e)return new u.IteratorObservable(e,n);if(o.isArrayLike(e))return new l.ArrayLikeObservable(e,n)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")},t.prototype._subscribe=function(e){var t=this.ish,n=this.scheduler;return null==n?t[d.observable]().subscribe(e):t[d.observable]().subscribe(new p.ObserveOnSubscriber(e,n,0))},t}(f.Observable);t.FromObservable=v},function(e,t,n){"use strict";function r(e){var t=e[l.iterator];if(!t&&"string"==typeof e)return new f(e);if(!t&&void 0!==e.length)return new p(e);if(!t)throw new TypeError("object is not iterable");return e[l.iterator]()}function i(e){var t=+e.length;return isNaN(t)?0:0!==t&&o(t)?(t=a(t)*Math.floor(Math.abs(t)),t<=0?0:t>d?d:t):t}function o(e){return"number"==typeof e&&u.root.isFinite(e)}function a(e){var t=+e;return 0===t?t:isNaN(t)?t:t<0?-1:1}var s=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},u=n(5),c=n(0),l=n(13),h=function(e){function t(t,n){if(e.call(this),this.scheduler=n,null==t)throw new Error("iterator cannot be null.");this.iterator=r(t)}return s(t,e),t.create=function(e,n){return new t(e,n)},t.dispatch=function(e){var t=e.index,n=e.hasError,r=e.iterator,i=e.subscriber;if(n)return void i.error(e.error);var o=r.next();return o.done?void i.complete():(i.next(o.value),e.index=t+1,i.closed?void("function"==typeof r.return&&r.return()):void this.schedule(e))},t.prototype._subscribe=function(e){var n=0,r=this,i=r.iterator,o=r.scheduler;if(o)return o.schedule(t.dispatch,0,{index:n,iterator:i,subscriber:e});for(;;){var a=i.next();if(a.done){e.complete();break}if(e.next(a.value),e.closed){"function"==typeof i.return&&i.return();break}}},t}(c.Observable);t.IteratorObservable=h;var f=function(){function e(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.length),this.str=e,this.idx=t,this.len=n}return e.prototype[l.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},e}(),p=function(){function e(e,t,n){void 0===t&&(t=0),void 0===n&&(n=i(e)),this.arr=e,this.idx=t,this.len=n}return e.prototype[l.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},e}(),d=Math.pow(2,53)-1},function(e,t,n){"use strict";function r(e){var t=e.value,n=e.subscriber;n.closed||(n.next(t),n.complete())}function i(e){var t=e.err,n=e.subscriber;n.closed||n.error(t)}var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},a=n(5),s=n(0),u=function(e){function t(t,n){e.call(this),this.promise=t,this.scheduler=n}return o(t,e),t.create=function(e,n){return new t(e,n)},t.prototype._subscribe=function(e){var t=this,n=this.promise,o=this.scheduler;if(null==o)this._isScalar?e.closed||(e.next(this.value),e.complete()):n.then(function(n){t.value=n,t._isScalar=!0,e.closed||(e.next(n),e.complete())},function(t){e.closed||e.error(t)}).then(null,function(e){a.root.setTimeout(function(){throw e})});else if(this._isScalar){if(!e.closed)return o.schedule(r,0,{value:this.value,subscriber:e})}else n.then(function(n){t.value=n,t._isScalar=!0,e.closed||e.add(o.schedule(r,0,{value:n,subscriber:e}))},function(t){e.closed||e.add(o.schedule(i,0,{err:t,subscriber:e}))}).then(null,function(e){a.root.setTimeout(function(){throw e})})},t}(s.Observable);t.PromiseObservable=u},function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 1===e.length||2===e.length&&i.isScheduler(e[1])?a.from(e[0]):s.concatAll()(o.of.apply(void 0,e))}var i=n(8),o=n(75),a=n(72),s=n(80);t.concat=r},function(e,t,n){"use strict";var r=n(68);t.from=r.FromObservable.create},function(e,t,n){"use strict";var r=n(67);t.fromEvent=r.FromEventObservable.create},function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=Number.POSITIVE_INFINITY,r=null,u=e[e.length-1];return a.isScheduler(u)?(r=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof u&&(n=e.pop()),null===r&&1===e.length&&e[0]instanceof i.Observable?e[0]:s.mergeAll(n)(new o.ArrayObservable(e,r))}var i=n(0),o=n(6),a=n(8),s=n(28);t.merge=r},function(e,t,n){"use strict";var r=n(6);t.of=r.ArrayObservable.of},function(e,t,n){"use strict";function r(e,t){return i.distinctUntilChanged(e,t)(this)}var i=n(81);t.distinctUntilChanged=r},function(e,t,n){"use strict";function r(e,t,n){return i.first(e,t,n)(this)}var i=n(82);t.first=r},function(e,t,n){"use strict";function r(e,t){return i.map(e,t)(this)}var i=n(83);t.map=r},function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return i.startWith.apply(void 0,e)(this)}var i=n(85);t.startWith=r},function(e,t,n){"use strict";function r(){return i.mergeAll(1)}var i=n(28);t.concatAll=r},function(e,t,n){"use strict";function r(e,t){return function(n){return n.lift(new u(e,t))}}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(3),a=n(18),s=n(7);t.distinctUntilChanged=r;var u=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.compare,this.keySelector))},e}(),c=function(e){function t(t,n,r){e.call(this,t),this.keySelector=r,this.hasKey=!1,"function"==typeof n&&(this.compare=n)}return i(t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t=this.keySelector,n=e;if(t&&(n=a.tryCatch(this.keySelector)(e),n===s.errorObject))return this.destination.error(s.errorObject.e);var r=!1;if(this.hasKey){if(r=a.tryCatch(this.compare)(this.key,n),r===s.errorObject)return this.destination.error(s.errorObject.e)}else this.hasKey=!0;Boolean(r)===!1&&(this.key=n,this.destination.next(e))},t}(o.Subscriber)},function(e,t,n){"use strict";function r(e,t,n){return function(r){return r.lift(new s(e,t,n,r))}}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(3),a=n(92);t.first=r;var s=function(){function e(e,t,n,r){this.predicate=e,this.resultSelector=t,this.defaultValue=n,this.source=r}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},e}(),u=function(e){function t(t,n,r,i,o){e.call(this,t),this.predicate=n,this.resultSelector=r,this.defaultValue=i,this.source=o,this.index=0,this.hasCompleted=!1,this._emitted=!1}return i(t,e),t.prototype._next=function(e){var t=this.index++;this.predicate?this._tryPredicate(e,t):this._emit(e,t)},t.prototype._tryPredicate=function(e,t){var n;try{n=this.predicate(e,t,this.source)}catch(e){return void this.destination.error(e)}n&&this._emit(e,t)},t.prototype._emit=function(e,t){return this.resultSelector?void this._tryResultSelector(e,t):void this._emitFinal(e)},t.prototype._tryResultSelector=function(e,t){var n;try{n=this.resultSelector(e,t)}catch(e){return void this.destination.error(e)}this._emitFinal(n)},t.prototype._emitFinal=function(e){var t=this.destination;this._emitted||(this._emitted=!0,t.next(e),t.complete(),this.hasCompleted=!0)},t.prototype._complete=function(){var e=this.destination;this.hasCompleted||"undefined"==typeof this.defaultValue?this.hasCompleted||e.error(new a.EmptyError):(e.next(this.defaultValue),e.complete())},t}(o.Subscriber)},function(e,t,n){"use strict";function r(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new a(e,t))}}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(3);t.map=r;var a=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.thisArg))},e}();t.MapOperator=a;var s=function(e){function t(t,n,r){e.call(this,t),this.project=n,this.count=0,this.thisArg=r||this}return i(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(o.Subscriber)},function(e,t,n){"use strict";function r(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(r){return"number"==typeof t&&(n=t,t=null),r.lift(new s(e,t,n))}}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(97),a=n(57);t.mergeMap=r;var s=function(){function e(e,t,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.project=e,this.resultSelector=t,this.concurrent=n}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.project,this.resultSelector,this.concurrent))},e}();t.MergeMapOperator=s;var u=function(e){function t(t,n,r,i){void 0===i&&(i=Number.POSITIVE_INFINITY),e.call(this,t),this.project=n,this.resultSelector=r,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return i(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){this.add(o.subscribeToResult(this,e,t,n))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,i){this.resultSelector?this._notifyResultSelector(e,t,n,r):this.destination.next(t)},t.prototype._notifyResultSelector=function(e,t,n,r){var i;try{i=this.resultSelector(e,t,n,r)}catch(e){return void this.destination.error(e)}this.destination.next(i)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(a.OuterSubscriber);t.MergeMapSubscriber=u},function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){var n=e[e.length-1];u.isScheduler(n)?e.pop():n=null;var r=e.length;return 1===r?s.concat(new o.ScalarObservable(e[0],n),t):r>1?s.concat(new i.ArrayObservable(e,n),t):s.concat(new a.EmptyObservable(n),t)}}var i=n(6),o=n(12),a=n(11),s=n(71),u=n(8);t.startWith=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(4),o=function(e){function t(t,n){e.call(this)}return r(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(i.Subscription);t.Action=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(5),o=n(86),a=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n,this.pending=!1}return r(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,this.pending=!0;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),i.root.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){return void 0===n&&(n=0),null!==n&&this.delay===n&&this.pending===!1?t:i.root.clearInterval(t)&&void 0||void 0},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);return n?n:void(this.pending===!1&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null)))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,r!==-1&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(o.Action);t.AsyncAction=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(59),o=function(e){function t(){e.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return r(t,e),t.prototype.flush=function(e){var t=this.actions;if(this.active)return void t.push(e);var n;this.active=!0;do if(n=e.execute(e.state,e.delay))break;while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}},t}(i.Scheduler);t.AsyncScheduler=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(87),o=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n}return r(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(i.AsyncAction);t.QueueAction=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(88),o=function(e){function t(){e.apply(this,arguments)}return r(t,e),t}(i.AsyncScheduler);t.QueueScheduler=o},function(e,t,n){"use strict";var r=n(89),i=n(90);t.queue=new i.QueueScheduler(r.QueueAction)},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(){var t=e.call(this,"no elements in sequence");this.name=t.name="EmptyError",this.stack=t.stack,this.message=t.message}return r(t,e),t}(Error);t.EmptyError=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function t(t){e.call(this),this.errors=t;var n=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return r(t,e),t}(Error);t.UnsubscriptionError=i},function(e,t,n){"use strict";function r(e){return e}t.identity=r},function(e,t,n){"use strict";function r(){}t.noop=r},function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return i(e)}function i(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}:o.noop}var o=n(95);t.pipe=r,t.pipeFromArray=i},function(e,t,n){"use strict";function r(e,t,n,r){var f=new l.InnerSubscriber(e,n,r);if(f.closed)return null;if(t instanceof u.Observable)return t._isScalar?(f.next(t.value),f.complete(),null):(f.syncErrorThrowable=!0,t.subscribe(f));if(o.isArrayLike(t)){for(var p=0,d=t.length;p<d&&!f.closed;p++)f.next(t[p]);f.closed||f.complete()}else{if(a.isPromise(t))return t.then(function(e){f.closed||(f.next(e),f.complete())},function(e){return f.error(e)}).then(null,function(e){i.root.setTimeout(function(){throw e})}),f;if(t&&"function"==typeof t[c.iterator])for(var v=t[c.iterator]();;){var y=v.next();if(y.done){f.complete();break}if(f.next(y.value),f.closed)break}else if(t&&"function"==typeof t[h.observable]){var b=t[h.observable]();if("function"==typeof b.subscribe)return b.subscribe(new l.InnerSubscriber(e,n,r));f.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var g=s.isObject(t)?"an invalid object":"'"+t+"'",m="You provided "+g+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";f.error(new TypeError(m))}}return null}var i=n(5),o=n(31),a=n(33),s=n(32),u=n(0),c=n(13),l=n(55),h=n(14);t.subscribeToResult=r},function(e,t,n){"use strict";function r(e,t,n){if(e){if(e instanceof i.Subscriber)return e;if(e[o.rxSubscriber])return e[o.rxSubscriber]()}return e||t||n?new i.Subscriber(e,t,n):new i.Subscriber(a.empty)}var i=n(3),o=n(15),a=n(26);t.toSubscriber=r},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}}])});